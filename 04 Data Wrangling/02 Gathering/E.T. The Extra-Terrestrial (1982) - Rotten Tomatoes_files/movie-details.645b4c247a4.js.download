!function(){function a(a,d){$(document).ready(function(){var e=$(a);e.slick&&(d.nextArrow||(d.nextArrow=b),d.prevArrow||(d.prevArrow=c),e.slick(d))})}var b='<button class="CarouselButton CarouselButton__right"><svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" style="fill: currentcolor; vertical-align: middle; width: 24px; height: 24px;"><g><path d="M10 6l-1.41 1.41 4.58 4.59-4.58 4.59 1.41 1.41 6-6z"></path></g></svg></button>',c='<button class="CarouselButton CarouselButton__left"><svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" style="fill: currentcolor; vertical-align: middle; width: 24px; height: 24px;"><g><path d="M15.41 7.41l-1.41-1.41-6 6 6 6 1.41-1.41-4.58-4.59z"></path></g></svg></button>';RottenTomatoes.carousel={init:a}}(),function(){function a(){d.modal("hide"),$pdk.controller.resetPlayer(),d.find("#videoPlayer").html("")}function b(b,c,e,f,g){var h={accountPid:RottenTomatoes.thirdParty&&RottenTomatoes.thirdParty.mpx.accountPid||"",playerPid:RottenTomatoes.thirdParty&&RottenTomatoes.thirdParty.mpx.playerPid||"",accountId:RottenTomatoes.thirdParty&&RottenTomatoes.thirdParty.mpx.accountId||""};d.find("#videoPlayer").html('<iframe class="player" src="//player.theplatform.com/p/'+h.accountPid+"/"+h.playerPid+"/select/media/guid/"+h.accountId+"/"+b+"?autoPlay="+f+g+'&params=manifest%3Dm3u%26sst%3Dtrue%26debug%3Dtrue%26policy%3D9369485" onload="$pdk.bind(this, true); $pdk.controller.setIFrame(this, true);"allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" oallowfullscreen="" msallowfullscreen=""frameborder="0"></iframe>'),d.modal(),d.on("hidden.bs.modal",a),dataLayer.push({event:"ModalTrailer",title:e})}function c(b){d=b,$(".closebutton").on("click",a),$(".closeBtn").on("click",a)}var d=null;RottenTomatoes.trailerModal={init:c,openNewModal:b}}(),function(){function a(a,b,c){e.modal(),$("#iframeVideoPlayer").attr("src",a),f.attr("content",g+",minimum-scale=1,maximum-scale=1,user-scalable=no"),e.find(".modal-dialog").append('<div class="modal-link-text"><a target="_blank" class="modal-link-url" style="color:#FFFFFF" href="'+c+'"></a></div>'),e.find(".modal-link-url").text(b)}function b(){$("#newIframeTrailerModal").modal("hide")}function c(){$("#iframeVideoPlayer").attr("src","about:blank"),f.attr("content",g)}function d(a){e=a,f=$('meta[name="viewport"]'),g=f.attr("content"),e.on("hidden.bs.modal",c),$(".closebutton").on("click",b)}var e=null,f=null,g=null;RottenTomatoes.iFrameTrailerModal={init:d,openIframeModal:a}}(),function(){function a(a,b){return new Promise(function(e,f){if(!(a&&b&&a.fandangoId&&a.titleId))return f(new Error(c+".getShowtimeCalendar: missing movieInfo"));$.ajax({url:RottenTomatoes.link.napiMovieCalendar({id:a.fandangoId,title:a.titleId}),data:b,timeout:d,xhrFields:{withCredentials:!0}}).done(function(c){e(Object.assign({fandangoData:a,geoLocation:b},c))}).fail(f)})}function b(a){return new Promise(function(b,e){if(!a)return e(new Error(c+".getShowtimes: missing movieInfo"));$.ajax({url:RottenTomatoes.link.napiMovieShowtimeGroupings({id:a.fandangoData&&a.fandangoData.fandangoId,startDate:a.selectedDate||new Date}),data:a.geoLocation,timeout:d,xhrFields:{withCredentials:!0}}).done(function(c){b(Object.assign({},a,c))}).fail(e)})}var c="RottenTomatoes.showtimes",d=11e3;RottenTomatoes.showtimes={getShowtimeCalendar:a,getShowtimes:b}}(),function(){function a(a,b){var c,d=[],e=0;if("string"!=typeof a&&"number"!=typeof a)return null;if(a=a.toString(),c=a.length,b-c<1)return a;for(e;e<b-c;e++)d.push("0");return d.concat([a]).join("")}function b(b){return b&&"string"==typeof b?b.split("+").map(function(b){var c,d=[];if(!b)return null;if(j.FIVE_DIGIT.test(b))return[b];if(!j.ZIP_RANGE.test(b))return null;for(c=b.split("-"),c[0];c[0]<=c[1];c[0]++)d.push(a(c[0],5));return d}):null}function c(a){var c,d={};if(!a||"string"!=typeof a||a.indexOf(":")<0)return"";try{d=JSON.parse(a)}catch(a){return""}return c=b(d.zip),{zipRanges:c,zip:c&&c[0]&&c[0][0]||"",city:d.city||"",state:d.state||"",areacode:d.areacode||"",lat:d.lat||"",long:d.long||"",countryCode:d.countrycode||""}}function d(){return c(RottenTomatoes.cookie.getCookie(i.AKAMAI_LOCATION))}function e(){var a;return RottenTomatoes.cookie.getCookie(i.ZIP)?a={zip:RottenTomatoes.cookie.getCookie(i.ZIP),displayName:RottenTomatoes.cookie.getCookie(i.ZIP)}:RottenTomatoes.cookie.getCookie(i.LAT)&&RottenTomatoes.cookie.getCookie(i.LONG)?a={lat:RottenTomatoes.cookie.getCookie(i.LAT),long:RottenTomatoes.cookie.getCookie(i.LONG),displayName:RottenTomatoes.cookie.getCookie(i.LOCATION_NAME)||"Unavailable"}:(RottenTomatoes.context.akamaiEdgescape=d(),RottenTomatoes.context.akamaiEdgescape&&(a={zip:RottenTomatoes.context.akamaiEdgescape.zip,displayName:RottenTomatoes.context.akamaiEdgescape.zip})),a}function f(a,b){var c={type:"GET",timeout:k,url:RottenTomatoes.link.napiGetLocationFromText({},{text:a})};RottenTomatoes.xhr.ajax(c).done(b).fail(function(){})}function g(){return function(a,b){var c=RottenTomatoes.link.napiAutocomplete({text:a.term});$.ajax({url:c,timeout:k,xhrFields:{withCredentials:!0},success:function(a){var c=a.predictions.map(function(a){return{placeId:a.id,label:a.description}});b(c)},error:function(a){}})}}function h(a){a&&(RottenTomatoes.cookie.deleteCookie(i.ZIP),RottenTomatoes.cookie.deleteCookie(i.LOCATION_NAME),RottenTomatoes.cookie.deleteCookie(i.LAT),RottenTomatoes.cookie.deleteCookie(i.LONG),a.displayName&&j.FIVE_DIGIT.test(a.displayName)&&RottenTomatoes.cookie.setCookie(i.ZIP,a.displayName,365),a.lat&&a.long&&(RottenTomatoes.cookie.setCookie(i.LAT,a.lat,365),RottenTomatoes.cookie.setCookie(i.LONG,a.long,365)),RottenTomatoes.cookie.setCookie(i.LOCATION_NAME,a.displayName,365))}var i={ZIP:"zip",LAT:"lat",LONG:"long",LOCATION_NAME:"location_name",AKAMAI_LOCATION:"akamai_generated_location"},j={FIVE_DIGIT:/^\d{5}$/,ZIP_RANGE:/^\d{5}-\d{5}$/},k=11e3;RottenTomatoes.locationUtils={getAkamaiEdgescape:d,getLocation:e,getLocationFromText:f,getLocationAutocompleteSource:g,saveLocationCookie:h}}(),function(){function a(a){a&&RottenTomatoes.locationUtils.getLocationFromText(a,function(a){RottenTomatoes.eventQ.emit(f.LOCATION_PICKER.NEW_LOCATION,a)})}function b(b,c){a(c&&c.item&&c.item.label)}function c(c,d){c.autocomplete(Object.assign({appendTo:g.SHOWTIMES_RESULTS,autofocus:!0,source:RottenTomatoes.locationUtils.getLocationAutocompleteSource(),minLength:2,select:b},d)),c.keydown(function(b){b.keyCode===h&&a(c[0].value)})}function d(a,b){e=a,c(e,b)}var e,f={LOCATION_PICKER:{NEW_LOCATION:"location:new-location"}},g={SHOWTIMES_RESULTS:".js-location-results",TYPEAHEAD_INPUT:".js-movie-showtimes-location__input"},h=13;RottenTomatoes.locationPicker={init:d,EVENT_NAMES:f}}(),function(){function a(a,b){if(null===b)return Promise.reject(new Error(m.INVALID_DATA));if("movie"!==b.mediaType&&"tv"!==b.mediaType)return Promise.reject(new Error(m.INVALID_MEDIA_TYPE));var c,d;switch(a){case k.CREATE_WTS:d=RottenTomatoes.link.napiUserWTSCreate(),c=l.POST;break;case k.DELETE_WTS:d=RottenTomatoes.link.napiUserWTSDelete(),c=l.POST;break;case k.CREATE_RATING:d=RottenTomatoes.link.napiUserRatingCreate(),c=l.POST;break;case k.GET_WTS:d=RottenTomatoes.link.napiUserGetWTS(),c=l.GET;break;case k.GET_RATING:d=RottenTomatoes.link.napiUserGetRating(),c=l.GET;break;default:return Promise.reject(new Error(m.INVALID_API_NAME))}return new Promise(function(a,e){RottenTomatoes.xhr.ajax({type:c,url:d,timeout:j,dataType:"json",data:b}).done(function(b){a(b)}).fail(function(a){e(a)})})}function b(b){return a(k.CREATE_WTS,b)}function c(b){return a(k.DELETE_WTS,b)}function d(b){return a(k.CREATE_RATING,b)}function e(b){return a(k.GET_WTS,b)}function f(b){return a(k.GET_RATING,b)}function g(a,b){var c,d={};return"movie"!==b&&"tv"!==b||(d[b+"Id"]=a,c="movie"===b?RottenTomatoes.link.napiUserMovieRating:RottenTomatoes.link.napiUserTvRating),new Promise(function(a,b){$.ajax({type:"GET",url:c(d),timeout:j,dataType:"json"}).done(function(b){a(b)}).fail(b)})}function h(a,b,c){var d,e={};return"movie"!==c&&"tv"!==c||(e[c+"Id"]=a,d="movie"===c?RottenTomatoes.link.napiUserUpdateMovieRating:RottenTomatoes.link.napiUserUpdateTvRating),new Promise(function(a,c){RottenTomatoes.xhr.ajax({method:"POST",url:d(e),timeout:j,data:b,dataType:"json"}).done(function(b){a(b)}).fail(c)})}var i={RATING:{FAIL_RATING_POST:"User rating post failed",RATING_POSTED:"User rating was posted",SUBMIT_BUTTON_CLICKED:"User hit the rating submit button"}},j=1e4,k={CREATE_WTS:"createWTS",DELETE_WTS:"deleteWTS",CREATE_RATING:"createRating",GET_WTS:"getWTS",GET_RATING:"getRating"},l={POST:"POST",GET:"GET"},m={INVALID_DATA:"Invalid data",INVALID_MEDIA_TYPE:"Invalid mediaType",INVALID_API_NAME:"Invalid api name"};RottenTomatoes.rating={createWTS:b,deleteWTS:c,getWTS:e,getRating:f,getUserRating:g,updateRating:d,updateUserRating:h,EVENT_NAMES:i}}(),function(){function a(a){a.preventDefault(),a.target.className.indexOf(h.AMENITY_DESCRIPTION)>-1?alert(this.getAttribute("data-amenity-desc")):alert("Tickets coming soon. Be sure to check back later!")}function b(){$(g.SHOWTIMES_LOCATION).removeClass(h.CSS_HIDDEN),$(g.SHOWTIMES_PRESENTATIONS).addClass(h.CSS_HIDDEN)}function c(){$(g.SHOWTIMES_LOCATION_INPUT).val(""),$(g.SHOWTIMES_LOCATION).addClass(h.CSS_HIDDEN),$(g.SHOWTIMES_PRESENTATIONS).removeClass(h.CSS_HIDDEN)}function d(d){var e,f=$(g.SHOWTIMES_PRESENTATION_CONTAINER);f.length&&(e=$(nunjucks.render("_movieShowtimes",d)),e.find(g.AMENITY_ALERT).on("click touchstart",a),e.find(g.CHANGE_LOCATION).on("click touchstart",b),f.html(e),c(),$(g.SHOWTIMES_NO_SHOWTIMES_MESSAGE).addClass("hide"),$(g.GO_BACK).removeClass("hide"))}function e(){$(g.SHOWTIMES_NO_SHOWTIMES_MESSAGE).removeClass("hide"),$(g.GO_BACK).addClass("hide")}function f(a,b){var c=a||RottenTomatoes.context.fandangoData;c&&b&&($(g.SHOWTIMES_LOCATION_INPUT).val(b.displayName),RottenTomatoes.showtimes.getShowtimeCalendar(c,b).then(RottenTomatoes.showtimes.getShowtimes).then(d).then(function(){RottenTomatoes.locationUtils.saveLocationCookie(b)}).catch(e))}var g={AMENITY_ALERT:".js-tshow-grp__amenity-name a",CHANGE_LOCATION:".changeLocation",FULL_TITLE:"#fullTitle",GO_BACK:".goBack",MOVIE_TITLE:"h1.title",SHOWTIMES_LOCATION:".showtimes-location",SHOWTIMES_PRESENTATIONS:".showtimes-presentations",SHOWTIMES_CONTAINER:".js-showtimes-container",SHOWTIMES_LOCATION_INPUT:".js-movie-showtimes-location__input",SHOWTIMES_PRESENTATION_CONTAINER:".js-showtimes-presentations-container",SHOWTIMES_NO_SHOWTIMES_MESSAGE:".js-movie-showtimes-location__no-showtime-message"},h={AMENITY_DESCRIPTION:"js-tshow-grp__amenity-description",CSS_HIDDEN:"hide"};!function(){var a=$(g.SHOWTIMES_LOCATION_INPUT);a.length&&RottenTomatoes.locationPicker.init(a),$(g.GO_BACK).on("click touchstart",c),RottenTomatoes.eventQ.register(RottenTomatoes.locationPicker.EVENT_NAMES.LOCATION_PICKER.NEW_LOCATION,function(a){$(g.SHOWTIMES_LOCATION_INPUT).val(a.displayName),f(null,a)})}(),RottenTomatoes.movie={renderShowtimes:f}}(),function(){function a(a){var b=!1,c=0;if(!a||!a.length)return b;for(c;c<a.length;c++)if(j[a[c]]){b=!0;break}return b}function b(a){return a.some(function(a){return a===i})}function c(a,b){return new Promise(function(c,d){if(!a)return d(new TypeError("Missing Data"));$.ajax({type:"GET",url:a,timeout:h,dataType:"json"}).done(function(a){c(Object.assign(b,a))}).fail(d)})}function d(a){var b={id:a};return c(RottenTomatoes.link.napiAdminMovieDetailMenu(b),b)}function e(a,b,d){var e={episodeId:a,seasonId:b,seriesId:d};return c(RottenTomatoes.link.napiAdminTvEpisodeDetailMenu(e),e)}function f(a,b){var d={seasonId:a,seriesId:b};return c(RottenTomatoes.link.napiAdminTvSeasonDetailMenu(d),d)}function g(a){var b={seriesId:a};return c(RottenTomatoes.link.napiAdminTvSeriesDetailMenu(b),b)}var h=1e4,i="RTCRITIC",j={MOVIEEXTRA:"MOVIEEXTRA",MOVIE:"MOVIE",ADMIN:"ADMIN",EDITORIAL:"EDITORIAL",TOMATAZOS:"TOMATAZOS"};RottenTomatoes.admin={canDisplayAdminMenu:a,canDisplayCriticAddArticle:b,getMovieDetailMenu:d,getTvEpisodeDetailMenu:e,getTvSeasonDetailMenu:f,getTvSeriesDetailMenu:g}}(),function(){function a(){var a=$(window).scrollTop();$("#movieListColumn").css("height",$("#mainColumn").height());var e=$("#mainColumn").height()+d-$("#movies_sidebar").height(),f=0;$("#super").height()>0&&(f=$("#super").height()),a<=d+f?b.removeAttr("style"):a>e+f?b.css({position:"absolute",bottom:"0",top:"auto"}):b.css({position:"fixed",top:c})}var b=$("#movies_sidebar"),c=-1*$("#main_movie_sidebar_content").height()+40,d=$("#movies_sidebar>.panel-rt").offset().top-61;$(window).scroll(function(){a()}),a()}(),function(){function a(a){window.ga&&window.ga("gtmTracker.send","pageview",window.location.pathname+"/modal/videos/"+a)}var b={CAROUSEL:".Carousel.VideosCarousel",CAROUSEL_ITEM:".VideosCarousel__item a",CAROUSEL_ROOT:"#videos-carousel-root"},c={SLIDES_TO_SHOW:2,SLIDES_TO_SCROLL:2},d={SLIDES_TO_SHOW:4,SLIDES_TO_SCROLL:4},e={SLIDES_TO_SHOW:2.5,SLIDES_TO_SCROLL:2},f=function(){return $(b.CAROUSEL_ROOT)&&$(b.CAROUSEL_ROOT).width()<300||!1}();!function(){var g=RottenTomatoes.context.videoClipsJson&&RottenTomatoes.context.videoClipsJson.count>3||!1,h=RottenTomatoes.context.videoClipsJson&&RottenTomatoes.context.videoClipsJson.count>4||!1,i={dots:!0,infinite:g,speed:250,slidesToShow:f?c.SLIDES_TO_SHOW:d.SLIDES_TO_SHOW,slidesToScroll:f?c.SLIDES_TO_SCROLL:d.SLIDES_TO_SCROLL,arrows:h,draggable:!0,lazyLoad:"ondemand",responsive:[{breakpoint:768,settings:{slidesToShow:e.SLIDES_TO_SHOW,slidesToScroll:e.SLIDES_TO_SCROLL,dots:!1,arrows:!1,infinite:!1}}]};RottenTomatoes.carousel.init(b.CAROUSEL,i),$(b.CAROUSEL_ITEM).each(function(b,c){$(c).on("click",function(){a($(this).attr("data-video-id"))})})}()}(),function(){function a(){return $(e.CAROUSEL_ROOT)&&$(e.CAROUSEL_ROOT).width()<300||!1}function b(a){window.dataLayer&&window.dataLayer.push({event:"MOBPhotoViewModal"}),window.ga&&window.ga("gtmTracker.send","pageview",window.location.pathname+"/modal/pictures/"+a)}function c(a){var c=document.querySelector(e.PHOTOSWIPE),d={index:a,preload:[f,g],indexIndicatorSep:" of ",shareEl:!1,fullscreenEl:!1,closeOnScroll:!1},h=new PhotoSwipe(c,PhotoSwipeUI_Default,k,d);h.init(),h.listen("afterChange",function(){b(h.currItem.pid)})}function d(b,d,e){var f=a(),g=k.length>3,l=k.length>4,m={dots:!0,infinite:g,speed:250,slidesToShow:f?h.SLIDES_TO_SHOW:i.SLIDES_TO_SHOW,slidesToScroll:f?h.SLIDES_TO_SCROLL:i.SLIDES_TO_SCROLL,arrows:l,draggable:!0,lazyLoad:"ondemand",responsive:[{breakpoint:768,settings:{slidesToShow:j.SLIDES_TO_SHOW,slidesToScroll:j.SLIDES_TO_SCROLL,dots:!1,arrows:!1,infinite:!1}}]};e&&RottenTomatoes.carousel.init(b,m),$(d).each(function(a,b){$(b).on("click",function(){c(a)})})}var e={CAROUSEL_ROOT:"#photos-carousel-root",PHOTOSWIPE:".pswp",IMAGE_PREFIX:"#photo-gallery-item-"},f=2,g=4,h={SLIDES_TO_SHOW:2,SLIDES_TO_SCROLL:2},i={SLIDES_TO_SHOW:4,SLIDES_TO_SCROLL:4},j={SLIDES_TO_SHOW:2.5,SLIDES_TO_SCROLL:2},k=[];!function(a){if(k=a&&a.map(function(a){return{pid:a.id,src:a.urls.fullscreen,w:a.width,h:a.height,title:a.caption}}),""!==window.location.hash){var b=RottenTomatoes.queryTool.getQueriesFromUrl().pid,c=$(e.IMAGE_PREFIX+b);$(document).ready(function(){c.trigger("click")})}}(RottenTomatoes.context.imagesJson),RottenTomatoes.photoComponent={init:d}}(),function(a){function b(){RottenTomatoes.tracking.satelliteTrack("verified rollover")}function c(){RottenTomatoes.tracking.satelliteTrack("verified rollover learn more clicks")}function d(){a(k.LEARN_MORE_LINK).off("click",c),a(k.VERIFIED_MODAL_MOBILE).removeClass("open"),a(k.MOBILE_OVERLAY).addClass("hide")}function e(d){d.preventDefault(),window.matchMedia("only screen and (max-width: 760px)").matches&&(a(k.VERIFIED_MODAL_MOBILE).addClass("open"),a(k.MOBILE_OVERLAY).removeClass("hide"),a(k.LEARN_MORE_LINK).on("click",c),b())}function f(){var d=this;a(this).popover("show"),a(k.POPOVER_CONTAINER).on("mouseleave",function(){a(d).popover("hide")}),b(),a(k.LEARN_MORE_LINK).on("click",c)}function g(){var b=this;setTimeout(function(){a(k.POPOVER_CONTAINER_HOVER).length||a(b).popover("hide")},300)}function h(){var a=RottenTomatoes.context.verifiedTooltip;return a&&a.verifiedTooltipTop?nunjucks.render("_verifiedPopover",{topText:a.verifiedTooltipTop,topLinkURL:a.verifiedTooltipTopLinkURL,topLinkText:a.verifiedTooltipTopLinkText,topLinkVisible:a.verifiedTooltipTopLinkVisible,bottomText:a.verifiedTooltipBottom,bottomLinkURL:a.verifiedTooltipBottomLinkURL,bottomLinkText:a.verifiedTooltipBottomLinkText,bottomLinkVisible:a.verifiedTooltipBottomLinkVisible,bottomVisible:a.verifiedTooltipBottomVisible}):""}function i(){var b=RottenTomatoes.context.verifiedTooltip;b&&b.verifiedTooltipTop&&a(k.CONTAINER).after(nunjucks.render("_verified-modal",{topText:b.verifiedTooltipTop,topLinkURL:b.verifiedTooltipTopLinkURL,topLinkText:b.verifiedTooltipTopLinkText,topLinkVisible:b.verifiedTooltipTopLinkVisible,bottomText:b.verifiedTooltipBottom,bottomLinkURL:b.verifiedTooltipBottomLinkURL,bottomLinkText:b.verifiedTooltipBottomLinkText,bottomLinkVisible:b.verifiedTooltipBottomLinkVisible,bottomVisible:b.verifiedTooltipBottomVisible}))}function j(){a(k.VERIFIED_TEXT).on("click",e),a(k.CLOSE_MODAL).on("click",d),a(k.POPOVER_LABEL).popover({trigger:"manual",html:!0,animation:!1,content:h()}).on("mouseenter",f).on("mouseleave",g)}var k={CLOSE_MODAL:"#verified-modal-close",LEARN_MORE_LINK:".verified-tab__tooltip--link",MOBILE_BOTTOM_NAV:"#nav-list",MOBILE_OVERLAY:".js-verified-modal-overlay",CONTAINER:"#main_container",POPOVER_LABEL:".js-verified-popover",REVIEW_TEXT:".js-review-text",VERIFIED_MODAL_MOBILE:".js-verified-modal--mobile",VERIFIED_TEXT:".js-verified-review",POPOVER_CONTAINER:".popover",POPOVER_CONTAINER_HOVER:".popover:hover"};!function(){i(),j()}(),RottenTomatoes.popover={reinitialize:j}}(jQuery),function(){RottenTomatoes.pages=Object.assign(RottenTomatoes.pages||{},{movieDetails:{}})}(),function(a){function b(b,c){c="string"==typeof c?parseInt(c):c,"number"!=typeof c&&(c=0),a(b).css({width:c+"%"})}function c(a){return"POSITIVE"===a?"upright":"spilled"}function d(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")}function e(d){var e,f=d.currentTarget.dataset.type,h="verified"===f?o.audienceScoreVerified:o.audienceScoreAll;switch(f){case"verified":e="audience | verified audience";break;case"all":e="audience | all audience"}RottenTomatoes.tracking.satelliteTrack(e),n.audience=Object.assign({},h,{activeBtn:f,audienceClass:c(h.scoreSentiment),description:o.msgs[f]}),g(),b(q.PROGRESS_BAR_AUDIENCE,h.score),a(q.AUDIENCE_TYPE_TOGGLE_BTNS).filter('[data-type="'+f+'"]').focus()}function f(c){var d,e=c.currentTarget.dataset.type,f="all"===e?o.tomatometerAllCritics:o.tomatometerTopCritics;switch(e){case"top":d="tomatometer | top critics";break;case"all":d="tomatometer | all critics"}RottenTomatoes.tracking.satelliteTrack(d),n.critics=Object.assign({},f,{activeBtn:e}),g(),b(q.PROGRESS_BAR_CRITICS,f.score),a(q.CRITICS_TYPE_TOGGLE_BTNS).filter('[data-type="'+e+'"]').focus()}function g(){p||(p=a(q.PARENT_ELEMENT).append("<div/>")),p.html(nunjucks.render("_scoreboardModal",n)),a(q.AUDIENCE_TYPE_TOGGLE_BTNS).click(e),a(q.CRITICS_TYPE_TOGGLE_BTNS).click(f),n.initialCriticProgress=n.critics.score||0,n.initialAudienceProgress=n.audience.score||0}function h(){var b=a(q.CRITICS_TYPE_TOGGLE_BTNS);b.length?b[0].focus():(b=a(q.AUDIENCE_TYPE_TOGGLE_BTNS),b.length&&b[0].focus())}function i(b){a(q.TOMATOMETER_OVERLAY).toggleClass(r.HIDE_SHOWTIMES_OVERLAY),j(),a(b&&b.currentTarget||q.SHOW_SCOREBOARD_BTN).toggleClass(r.CLOSE_BTN_VISIBLE),RottenTomatoes.tracking.satelliteTrack("tomatometer more info clicks")}function j(b){b||(b="all");var c=RottenTomatoes.context.scoreInfo;if(c&&c.tomatometerAllCritics&&c.tomatometerTopCritics){var d="all"===b?c.tomatometerAllCritics:c.tomatometerTopCritics,e=d.score+"%";a(q.RATINGS_POPOVER.TOMATOMETER_PROGRESS).css({width:e}).removeClass("rotten fresh certified_fresh").addClass(d.tomatometerState),a(q.RATINGS_POPOVER.TOMATOMETER_POPOVER_ICON).removeClass("rotten fresh certified_fresh").addClass(d.tomatometerState),d.score&&(a(q.RATINGS_POPOVER.TOMATOMETER_POPOVER_SCORE).text(d.score?e:"N/A"),a(q.RATINGS_POPOVER.AVERAGE_RATING).text(d.avgScore+"/10"),a(q.RATINGS_POPOVER.REVIEW_COUNT).text(d.numberOfReviews),a(q.RATINGS_POPOVER.FRESH_COUNT).text(d.freshCount),a(q.RATINGS_POPOVER.ROTTEN_COUNT).text(d.rottenCount)),k()}}function k(){var b=a(q.RATINGS_WRAP),c=b.data().hasTrailer,d=!a(q.TOMATOMETER_OVERLAY).hasClass(r.HIDE_SHOWTIMES_OVERLAY);a.when(d).then(function(){c||b.toggleClass(r.EXTENDED_RATINGS)})}function l(){g(),b(q.PROGRESS_BAR_AUDIENCE,n.initialAudienceProgress),b(q.PROGRESS_BAR_CRITICS,n.initialCriticProgress),h()}function m(a){var b=!!Object.keys(a).length;o={audienceScoreAll:RottenTomatoes.context.scoreInfo.audienceAll||{},audienceScoreVerified:RottenTomatoes.context.scoreInfo.audienceVerified||{},tomatometerAllCritics:RottenTomatoes.context.scoreInfo.tomatometerAllCritics||{},tomatometerTopCritics:RottenTomatoes.context.scoreInfo.tomatometerTopCritics||{},msgs:{verified:a.tarsMsgs&&a.tarsMsgs.verifiedMsg||s.verified,all:a.tarsMsgs&&a.tarsMsgs.allMsg||s.all}},n={hasMovieData:b,iconSizeCSSClass:d()?"tiny":"small",isReleased:RottenTomatoes.context.movieDetails.isReleased,releaseDate:RottenTomatoes.context.movieDetails.releaseDate,showtimesLink:RottenTomatoes.link.webShowtimes(),verified:a.isVerified,isPrerelease:a.isPrerelease,canVerifyRatings:a.canVerifyRatings,initialCriticProgress:0,initialAudienceProgress:0,counts:{allCritics:o.tomatometerAllCritics.numberOfReviews||0,topCritics:o.tomatometerTopCritics.numberOfReviews||0,allAudience:0,verifiedAudience:0},showMobileRatings:d(),critics:{},audience:{}},n.canVerifyRatings?n.audience=Object.assign({},o.audienceScoreVerified,{activeBtn:"verified",audienceClass:c(o.audienceScoreVerified.scoreSentiment),description:o.msgs.verified}):n.audience=Object.assign({},o.audienceScoreAll,{activeBtn:"all",audienceClass:c(o.audienceScoreAll.scoreSentiment),description:o.msgs.all}),n.critics=Object.assign({},o.tomatometerAllCritics,{activeBtn:"all"})}var n,o,p,q={SHOW_BTN:"#scoreModal_showScoreboardBtn",HIDE_BTN:"#scoreModal_hideScoreboardBtn",SHOW_BTN_NEW_BADGE:"#scoreModal_showScoreboardBtn_newBadge",PARENT_ELEMENT:".js-mop-ratings",RATINGS_WRAP:".js-mop-ratings-wrap",RATINGS_POPOVER:{AVERAGE_RATING:"#js-average-rating",FRESH_COUNT:"#js-fresh-count",REVIEW_COUNT:"#js-review-count",ROTTEN_COUNT:"#js-rotten-count",TOMATOMETER_POPOVER_ICON:"#js-popover-tomatometer-icon",TOMATOMETER_POPOVER_SCORE:"#js-popover-tomatometer-score",TOMATOMETER_PROGRESS:"#js-tomatometer-progress"},TOMATOMETER_OVERLAY:"#js-tomatometer-overlay",PROGRESS_BAR_AUDIENCE:"#scoreModal_progressBar_audience",PROGRESS_BAR_CRITICS:"#scoreModal_progressBar_critics",AUDIENCE_TYPE_TOGGLE_BTNS:".js-audience-toggle-btn",CRITICS_TYPE_TOGGLE_BTNS:".js-critics-toggle-btn"},r={EXTENDED_RATINGS:"mop-ratings-wrap--extended",HIDE_SHOWTIMES_OVERLAY:"hide-tm-overlay",CLOSE_BTN_VISIBLE:"mop-ratings-wrap__show-more-btn--close-visible"},s={verified:"The percentage of users who made a verified movie ticket purchase rating this 3.5 stars or higher.",all:"The percentage of users who rated this 3.5 stars or higher."};!function(){var b=RottenTomatoes.context.scoreBoardViewModel,c=RottenTomatoes.context.scoreInfo.tomatometerAllCritics,d=RottenTomatoes.context.scoreInfo.audienceAll,e=Boolean(c&&c.numberOfReviews&&RottenTomatoes.sanitizer.integer(c.score,-1)>=0),f=Boolean(d&&d.reviewCount&&RottenTomatoes.sanitizer.integer(d.score,-1)>=0);if(!e&&!f)return void a(q.SHOW_BTN).addClass("hide");a(q.HIDE_BTN).addClass("hide"),m(b),a(q.SHOW_BTN).click(l),b.showNewIcon&&a(q.SHOW_BTN_NEW_BADGE).removeClass("hide"),a(q.SHOW_BTN).on("click",i),a(q.HIDE_BTN).on("click",i)}()}(jQuery),function(a){function b(a){if(!a||!a.length)return!1;for(var b=!1,c=0;c<a.length;c++)if(g[a[c]]){b=!0;break}return b}function c(b){if(b.preventDefault(),h)return a(f.ADMIN_PANEL_CONTENT).toggleClass("hide");RottenTomatoes.admin.getMovieDetailMenu(RottenTomatoes.context.movieDetails.id).then(function(b){b&&b.markup&&(a(f.ADMIN_PANEL).append(b.markup),h=!0)}).catch(function(a){})}function d(d){if(b(d.roles)&&RottenTomatoes.context.movieDetails.id){var e=a("<a>").addClass("fr js-admin-panel__button").attr("href","#").css("padding","5px 5px 0 0").text(RottenTomatoes.context.movieDetails.id+" - Admin Menu").click(c);a(f.ADMIN_PANEL).append(e)}}function e(){h=!1,a(f.ADMIN_PANEL).html("")}var f={ADMIN_PANEL:".js-admin-panel",ADMIN_PANEL_CONTENT:".js-admin-panel__content"},g={MOVIEEXTRA:"MOVIEEXTRA",MOVIE:"MOVIE",ADMIN:"ADMIN",EDITORIAL:"EDITORIAL",TOMATAZOS:"TOMATAZOS"},h=!1;!function(){RottenTomatoes.eventQ.register(RottenTomatoes.header.EVENT_NAMES.AUTH.LOGIN,d),RottenTomatoes.eventQ.register(RottenTomatoes.header.EVENT_NAMES.AUTH.LOGOUT,e)}()}(jQuery),function(a){function b(){a("html, body").animate({scrollTop:a(d.RATING_ROOT).offset().top-a(window).height()/2},1e3)}function c(){var b=RottenTomatoes.queryTool.getQuery("pid");a(d.PHOTOS_CAROUSEL_PRELOAD).each(function(c,e){if(e.id===b){var f=a(this).find(d.PHOTOS_CAROUSEL_IMAGE);RottenTomatoes.lazyLoad.revealImage(f),f.click()}})}var d={CAROUSEL:".Carousel.PhotosCarousel",CAROUSEL_ITEM_LINK:".PhotosCarousel__item a",HERO_IMAGE_PLAY_BUTTON:"#heroImageContainer .playButton",PHOTOS_CAROUSEL_IMAGE:".PhotosCarousel__image",PHOTOS_CAROUSEL_PRELOAD:".PhotosCarousel .preload",RATE_IT_BUTTON:".js-rate-it-button",RATING_ROOT:"#rating-root"};!function(){RottenTomatoes.photoComponent.init(d.CAROUSEL,d.CAROUSEL_ITEM_LINK,!0),RottenTomatoes.queryTool.getQuery("pid")&&c(),a(d.HERO_IMAGE_PLAY_BUTTON).addClass("in"),a(d.RATE_IT_BUTTON).click(b),RottenTomatoes.context.fandangoData&&RottenTomatoes.movie.renderShowtimes(RottenTomatoes.context.fandangoData,RottenTomatoes.locationUtils.getLocation()),RottenTomatoes.clamp.update({buttonText:"Show More",buttonClass:"clamp-toggle__show-more--bold"})}()}(jQuery),function(){function a(a){a.preventDefault();var b=$(a.currentTarget);e?RottenTomatoes.iFrameTrailerModal.openIframeModal(b.attr("data-trailer-url"),b.data("sponsoredText"),b.data("sponsoredUrl")):f=function(){RottenTomatoes.iFrameTrailerModal.openIframeModal(b.attr("data-trailer-url"),b.data("sponsoredText"),b.data("sponsoredUrl"))}}function b(a){a.preventDefault();var b=$(a.currentTarget),e="";b.data("mpx-fwsite")&&(e="&fwsitesection="+b.data("mpx-fwsite")),c?RottenTomatoes.trailerModal.openNewModal(b.data("video-id"),b.data("thumbnail"),b.data("title"),!0,e):d=function(){RottenTomatoes.trailerModal.openNewModal(b.data("video-id"),b.data("thumbnail"),b.data("title"),!0,e)}}var c=!1,d=null,e=!1,f=null;!function(){RottenTomatoes.trailerModal.init($("#newTrailerModal")),c=!0,d&&(d(),d=null),RottenTomatoes.iFrameTrailerModal.init($("#newIframeTrailerModal")),e=!0,f&&(f(),f=null),$(".trailer_play_action_button").on("click",b),$(".featured_video_play_action_button").on("click",a)}()}(),function(){function a(){$(c.CAST_REMAINING).removeClass("castRemaining"),$(c.SHOW_MORE_CAST).hide()}function b(){$(c.CAST_REMAINING_IMG).each(function(a,b){RottenTomatoes.lazyLoad.revealImage(b)}),a()}var c={CAST_REMAINING:".castRemaining",CAST_REMAINING_IMG:".castRemaining img",SHOW_MORE_CAST:"#showMoreCast"};!function(){$(c.SHOW_MORE_CAST).click(b)}()}(),function(){function a(a){var b=[];return a.find("option").each(function(a){a=this,$(this).attr("data-text",a.innerText.toLowerCase()),b.push({text:a.innerText,attributes:Object.keys(a.attributes).map(function(b){var c=a.attributes[b];return c.nodeName+'="'+c.nodeValue+'"'})})}),b}function b(a,b,c){a.before('<div class="'+b+'-wrap rt-dropdown-trigger-wrap"></div>');var d=$("."+b+"-wrap");d.append('<button class="rt-dropdown-trigger js-rt-dropdown-trigger" data-id='+b+">"+c+"</button>"),d.append('<ul class="rt-dropdown-wrap" data-id='+b+"></ul>")}function c(a,b,c){a.on("mouseenter",function(){b.focus()}),a.on("mouseleave",function(){b.blur()}),a.on("click",function(){if($(this).attr("disabled"))b.find("option").first().prop("selected",!0);else{b.find("option[data-text]").removeAttr("selected");b.find('option[data-text="'+$(this).data("text")+'"]').prop("selected",!0),b.focus()}b.trigger("change"),$(c).removeClass("rt-dropdown-wrap--open")})}function d(){$(j.dropdown_item+"[data-class]").each(function(){$(this).addClass($(this).data("class"))})}function e(a,b){a.forEach(function(a){$(b).append('<li data-text="'+a.text.toLowerCase()+'" '+a.attributes.join(" ")+' class="rt-dropdown-wrap__item '+(a.attributes&&a.attributes.class||"")+'" >'+a.text+"</li>")}),d()}function f(a,b){a.on("click",function(){$(b).toggleClass(j.open_wrap)})}function g(a,b,c){a.on("change",function(a){var d=a.target.value;b.attr("value",a.target.value||"Select a Ticket Vendor"),b.html(a.target.value||"Select a Ticket Vendor"),$(c).find("li").removeClass(j.dropdown_active_item),$(c).find('li[data-text="'+d.toLowerCase()+'"]').addClass(j.dropdown_active_item)})}function h(a){$(document).on("click",function(b){$(b.target).hasClass("rt-dropdown-trigger")||$(a).removeClass(j.open_wrap)})}function i(a,d,i,k,l){b(a,d,i);var m=$('button[data-id="'+d+'"]');f(m,l),e(k,l),c($(l).find(j.dropdown_item),a,l),g(a,m,l),h(l)}var j={dropdown:".rt-dropdown",dropdown_item:".rt-dropdown-wrap__item",dropdown_active_item:"rt-dropdown-wrap__item--active",open_wrap:"rt-dropdown-wrap--open"};$(j.dropdown).each(function(){var b=$(this),c=b.data("id"),d=b.data("placeholder"),e=".rt-dropdown-wrap[data-id="+c+"]";i(b,c,d,a(b),e)})}(),function(){function a(){$(c.RT_TOOLTIP).on("mouseenter",function(){d=!0,RottenTomatoes.eventQ.emit(b.TOOLTIP.MOUSEENTER,d)}),$(c.RT_TOOLTIP).on("mouseleave",function(){d=!1,RottenTomatoes.eventQ.emit(b.TOOLTIP.MOUSELEAVE,d),$(this).remove()})}var b={TOOLTIP:{MOUSEENTER:"rt tooltip mouseenter",MOUSELEAVE:"rt tooltip mouseleave"}},c={RT_TOOLTIP:".rt-tooltip",RT_TOOLTIP_TRIGGER:'a[data-toggle="rt-tooltip"]'},d=!1;$(c.RT_TOOLTIP_TRIGGER).on("mouseenter click touch",function(){var b=$(this).data("title");0===$(c.RT_TOOLTIP).length&&($(this).append('<div class="rt-tooltip">'+b+"</div>"),$(c.RT_TOOLTIP).css($(this).data("placement")||"right","0"),a())}),$(c.RT_TOOLTIP_TRIGGER).on("mouseleave",function(){setTimeout(function(){d||$(c.RT_TOOLTIP).remove()},250)}),RottenTomatoes.tooltip={EVENT_NAMES:b}}(),function(){function a(a){a.removeClass(Object.values(ca.star).join(" "))}function b(b){$(P.RATING_STAR).each(function(){var c,d=parseFloat($(this).data("rating-value")),e=$(this).parent();a(e),c=d<b?ca.star.FILLED:ca.star.EMPTY,e.addClass(c)})}function c(a){$(P.REVIEW_TEXT_AREA).val(a||"")}function d(b){b=parseFloat(b),$(P.RATING_STAR).each(function(){var c=parseFloat($(this).data("rating-value")),d=$(this).parent();if(d.hasClass(ca.starDisplays.DESKTOP)||d.hasClass(ca.starDisplays.MOBILE)){var e;a(d),$('[data-rating-value="'+b+'"]').parent().addClass(Number.isInteger(b)?ca.star.FILLED:ca.star.HALF),d.hasClass(Object.values(ca.star).join(" "))||(e=c<b?ca.star.FILLED:ca.star.EMPTY),d.addClass(e)}})}function e(a){var b="";if(0!==a){var c=$('.star-display__mobile-half[data-rating-value="'+a+'"]');b=c.data("rating-value")+" stars: "+c.data("title")}$(P.RATING_MODAL_STAR_MEANINGS).html(b)}function f(a){d(a.initialScore),c(a.initialReview),e(a.initialScore),$(P.RATING_MODAL).modal(ca.HIDE)}function g(a){window.confirm("Are you sure you want to discard your review?")&&f(a)}function h(){$(P.RATING_MODAL_FOOTER).addClass(ca.HIDE),$(P.MSG_CONTACT_US).removeClass(ca.HIDE),$(P.MSG_VERIFY_USER).addClass(ca.HIDE),$(P.RATING_MODAL_TITLE).html("Hi there")}function i(){$(P.MSG_VERIFY_USER).removeClass(ca.HIDE),$(P.MSG_CONTACT_US).addClass(ca.HIDE),$(P.RATING_MODAL_FOOTER).removeClass(ca.HIDE),$(P.RATING_MODAL_TITLE).html("Real Quick")}function j(a){return!!RottenTomatoes.cookie.getCookie("auth_user")&&(U.includes(a)||"FBK"===RottenTomatoes.cookie.getCookie("loginPlatform"))}function k(){var a=$(this);a.addClass("disabled").html("Sending..."),
RottenTomatoes.auth.emailConfirmation().done(function(){a.html(Y),setTimeout(function(){$(P.VERIFICATION_MODAL).modal(ca.HIDE)},1e3)}).catch(function(){a.html(Z)})}function l(a){RottenTomatoes.auth.emailStatus().done(function(b){if(j(b.body.emailStatusId))return a();$(P.VERIFICATION_MODAL).modal({show:!0}),b.body.emailStatusId===R||b.body.emailStatusId===S||b.body.emailStatusId===T?h():(i(),$(P.RESEND_EMAIL_BTN).on("click",k))})}function m(a){V.html(a).show().fadeOut(2500)}function n(a){if(!a)return null;var b=document.createElement("div");return b.innerHTML=a,0===b.childNodes.length?null:b.childNodes[0].nodeValue}function o(){var a=$(P.WANT_TO_SEE_BTN),b=$(P.RATING_MODAL_MBL_BTN),c=ba.wtsSelected;ba.userRating&&ba.userRating.score&&"-"!==ba.userRating.score&&!c?(0!==X.initialScore&&(a.addClass(ca.HIDE),b.addClass(ca.HIDE)),RottenTomatoes.context&&RottenTomatoes.context.seasonId&&$(P.RATING_WIDGET).removeClass(ca.HIDE)):(a.removeClass(ca.HIDE),b.removeClass(ca.HIDE),RottenTomatoes.context&&RottenTomatoes.context.seasonId&&$(P.RATING_WIDGET).addClass(ca.HIDE))}function p(){var a=$(P.WANT_TO_SEE_BTN);ba.wtsSelected?a.addClass(ca.wts.SELECTED):a.removeClass(ca.wts.SELECTED),ba.userRating&&ba.userRating.score&&($(P.USER_RATING_WTS).addClass(ca.HIDE),0!==X.initialScore&&$(P.USER_EDIT_REVIEW_BTN).removeClass(ca.HIDE),a.addClass(ca.HIDE))}function q(a){var b=$(P.RATING_STARS);switch(ba.userRating&&ba.userRating.score&&($(P.USER_RATING_WTS).addClass(ca.HIDE),0!==X.initialScore&&$(P.USER_EDIT_REVIEW_BTN).removeClass(ca.HIDE)),ba.userRating.score){case"+":break;case void 0:case null:b.find(P.RATING_STAR).removeClass("score");break;default:var c;c=Number.parseFloat?Number.parseFloat(ba.userRating.score,10):Number(ba.userRating.score),c&&(b.find(P.RATING_STAR).removeClass("score"),b.find('[data-rating-value="'+c+'"]').addClass("score"),d(ba.userRating.score))}ba.userRating.score&&($(P.RATING_STARS_MOBILE_WRAP).removeClass("text-center").addClass("review-present"),$(P.RATING_WIDGET_REVIEW_DESCRIPTION).addClass("hide"),$(P.RATING_MODAL_OPEN_BTN).addClass("hide"),b.removeClass("hide"))}function r(){var a=$(P.REVIEW_TEXT_AREA),b=ba.userRating.review;b&&(a.val(n(ba.userRating.review)),b.length>Q&&(b=ba.userRating.review.substr(0,Q).trim()+"...")),$(P.USER_RATING_REVIEW_COMMENT).html(b)}function s(){var a=$(P.USER_THUMBNAIL),b=ba.userInfo?ba.userInfo.thumbnailUrl:"",c=ba.userInfo?ba.userInfo.profileUrl:"";b&&(W=$(P.USER_THUMBNAIL).attr("src")),$(P.USER_THUMBNAIL).attr("src",b||W),a.parent().attr("href",c)}function t(){RottenTomatoes.eventQ.emit(RottenTomatoes.rating.EVENT_NAMES.RATING.FAIL_RATING_POST,{})}function u(){var a={mediaId:ba.mediaId,mediaType:ba.mediaType};ba.wtsSelected?RottenTomatoes.rating.deleteWTS(a).then(function(){ba.wtsSelected=!1,p(),o()}).catch(t):RottenTomatoes.rating.createWTS(a).then(function(){ba.wtsSelected=!0,p(),o()}).catch(t)}function v(){return ba.userInfo?(ba.userInfo.firstName||"")+" "+(ba.userInfo.lastName&&ba.userInfo.lastName.slice(0,1)||""):""}function w(a,b,c){if(O&&O.hasProfanity(b))return window.alert("Your review does not meet our community guidelines. Please edit out any offensive language and try again.");if(!A(a))return m("Please choose a rating first.");RottenTomatoes.eventQ.emit(RottenTomatoes.rating.EVENT_NAMES.RATING.SUBMIT_BUTTON_CLICKED,{});var d={mediaId:ba.mediaId,mediaType:ba.mediaType,displayName:v(),facebookId:ba.userInfo&&ba.userInfo.fb_id,isSuperReviewer:ba.userInfo&&ba.userInfo.isSuperReviewer,score:a,reviewText:b,partnerId:aa[c]};RottenTomatoes.rating.updateRating(d).then(function(a){return ba.userRating=a,ba.userRating.partnerText=c,X={initialScore:a.score||0,initialReview:a.review||""},"tv"===ba.mediaType&&m("Review posted."),q(),r(),o(),RottenTomatoes.eventQ.emit(RottenTomatoes.rating.EVENT_NAMES.RATING.RATING_POSTED,ba.userRating),null}).catch(t)}function x(){l(function(){return u()})}function y(a){$(this).hasClass(ca.star.MOBILE_STAR)||(ba.userRating.score=$(a.target).data("ratingValue"),q(),o())}function z(){$(P.RATING_MODAL).modal("show")}function A(a){if(!a)return!1;RottenTomatoes.context.popcornMeterState;return!0}function B(a){var b,c=$(P.REVIEW_TEXT_AREA).first().val(),d=a.currentTarget&&a.currentTarget.dataset&&a.currentTarget.dataset.buttonType;b="desktop"===d?$(P.DROPDOWN_TRIGGER).attr("value"):$(P.DROPDOWN_TRIGGER).eq(1).attr("value"),l(function(){return w(ba.userRating.score,c,b)})}function C(a){$(P.WANT_TO_SEE_BTN)[a]("click touch",x),$(P.RATING_STAR)[a]("click touch",y),$(P.RATING_MODAL_BTN)[a]("click touch",z),$(P.USER_RATING_REVIEW_COMMENT)[a]("click touch",z),$(P.SUBMIT_BUTTON)[a]("click touch",B)}function D(a){m("We couldn't retrieve the rating.")}function E(){ba.userRating&&ba.userRating.isVerified&&($(P.DROPDOWN_TRIGGER).text(_.FANDANGO.NAME),$(P.DROPDOWN_TRIGGER).attr("value",_.FANDANGO.VALUE))}function F(){return p(),q(),r(),o(),C("on"),null}function G(){ba.userInfo&&(s(),ba.userInfo.isCritic&&$(P.ADD_ARTICLE_BUTTON).removeClass(ca.HIDE))}function H(){$(P.USER_INFO_MOBILE).removeClass(ca.HIDE),$(P.USER_INFO_DESKTOP).removeClass(ca.HIDE)}function I(){$(P.USER_INFO_MOBILE).addClass(ca.HIDE),$(P.USER_INFO_DESKTOP).addClass(ca.HIDE)}function J(a){ba.userInfo?Object.assign(ba.userInfo||{},a):ba.userInfo=a,H(),G();var b={mediaId:ba.mediaId,mediaType:ba.mediaType};RottenTomatoes.rating.getWTS(b).then(function(a){return ba.wtsSelected=!!a&&a.wtsSelected,RottenTomatoes.rating.getRating(b)}).then(function(a){a.isSuperReviewer&&$(P.SUPER_REVIEWER).removeClass(ca.SUPER_REVIEWER_HIDDEN),ba.userRating=a,X={initialScore:a.score||0,initialReview:a.review||""};var b=X.initialScore;if(b){var c=$('.js-modal-star-rating[data-rating-value="'+b+'"]').data("title");$(P.RATING_MODAL_STAR_MEANINGS).html(b+" stars: "+c)}}).then(F).then(E).catch(D)}function K(){return RottenTomatoes.dtmData.customerId||$(P.LOGIN_MODAL).modal("show"),!1}function L(){ba.userInfo=null,ba.userRating=null,ba.wtsSelected=null,I(),$(P.ADD_ARTICLE_BUTTON).addClass(ca.HIDE),s(),p(),q(),r(),o(),C("off")}function M(a){a.initialScore===(ba.userRating.score||0)&&a.initialReview===$(P.REVIEW_TEXT_AREA).val()?$(P.RATING_MODAL).modal(ca.HIDE):g(a)}function N(){var a;try{a=JSON.parse(window.atob(RottenTomatoes.context.badWordsList))}catch(a){}var b=RottenTomatoes.profanityFilter;b&&a&&(O=(new b).loadBadWords(a))}var O,P={ADD_ARTICLE_BUTTON:".js-critics-add-article",CRITIC_FILTER_LINK:".js-critics-filter-link",DROPDOWN_TRIGGER:".js-rt-dropdown-trigger",LOGIN_MODAL:"#login",MSG_VERIFY_USER:".js-msg-verify-user",MSG_CONTACT_US:".js-msg-contact-us",POST_REVIEW_FEEDBACK:".js-rating_textbox-submit-status",RESEND_EMAIL_BTN:".js-resend-email-btn",RATING_MODAL:"#rating_widget_modal",RATING_MODAL_BTN:".js-rating_modal-btn",RATING_MODAL_CLOSE_BTN:".js-rating__modal-closeBtn",RATING_MODAL_FOOTER:".rating-modal-footer",RATING_MODAL_OPEN_BTN:".js-user-rating-mobile__review-modal-button",RATING_MODAL_TITLE:".login-modal-title",RATING_MODAL_STAR_MEANINGS:".js-rating__widget-modal--star-meanings",RATING_STARS:".js-rating-stars",RATING_STARS_MOBILE_WRAP:".js-user-rating-mobile__stars-wrap",RATING_STAR:".js-rating-star",RATING_WIDGET:".rating_widget_mobile-star",RATING_WIDGET_REVIEW_DESCRIPTION:".js-user-rating-mobile__add-review-text",RATINGS_WRAP:".js-mop-ratings-wrap",REVIEW_TEXT_AREA:".js-rating_textbox-textarea",SUBMIT_BUTTON:".js-rating_textbox-submit-btn",TOMATOMETER_OVERLAY:"#js-tomatometer-overlay",SHOW_SCOREBOARD_BTN:"#scoreModal_showScoreboardBtn",HIDE_SCOREBOARD_BTN:"#scoreModal_hideScoreboardBtn",USER_THUMBNAIL:".js-rating_widget-user-thumb",VERIFICATION_MODAL:"#verify-email-reminder",WANT_TO_SEE_BTN:".js-rating_wts-btn",WANT_TO_SEE_RATINGS_GROUP:".js-wts-ratings-group",USER_INFO_DESKTOP:".js-user-media-rating__user-info",USER_INFO_MOBILE:".js-user-rating-mobile__header",USER_RATING_REVIEW_COMMENT:".js-user-rating-mobile__comment",USER_RATING_WTS:".user-rating-mobile__wts",USER_EDIT_REVIEW_BTN:".js-user-rating-mobile__edit",TICKET_VENODR_DROPDOWN_OPTION:".js-ticket-vendor_dropdown-option",TICKET_VENDOR_LEGAL_TEXT:".js-vas_legal-text",RATINGS_POPOVER:{AVERAGE_RATING:"#js-average-rating",FRESH_COUNT:"#js-fresh-count",REVIEW_COUNT:"#js-review-count",ROTTEN_COUNT:"#js-rotten-count",TOMATOMETER_POPOVER_ICON:"#js-popover-tomatometer-icon",TOMATOMETER_POPOVER_SCORE:"#js-popover-tomatometer-score",TOMATOMETER_PROGRESS:"#js-tomatometer-progress"},SUPER_REVIEWER:".js-super-reviewer",MULTIPAGE_MODAL:".js-multi-page-modal",EDIT_REVIEW_BTN:".js-edit-review-btn"},Q=185,R=0,S=1,T=2,U=[4,5,6],V=null,W="",X=null,Y="SENT",Z="Could not send",_={FANDANGO:{NAME:"Fandango",VALUE:"FANDANGO"}},aa={Fandango:"FANDANGO"},ba={mediaType:RottenTomatoes.context.ratingMediaInfo.mediaType,mediaId:RottenTomatoes.context.ratingMediaInfo.mediaId,userInfo:null,userRating:null,wtsSelected:!1},ca={HIDE:"hide",RATE_AND_REVIEW_MODAL_HIDDEN:"rate-and-review--hidden",SUPER_REVIEWER_HIDDEN:"super-reviewer-badge--hidden",star:{FILLED:"star-display__filled",HALF:"star-display__half",EMPTY:"star-display__empty",MOBILE_STAR:"star-display__mobile-half"},starDisplays:{DESKTOP:"star-display__desktop",MOBILE:"star-display__mobile"},wts:{SELECTED:"button--wts-selected",PRE_RELEASE:"wts--preRelease",POST_RELEASE:"wts--postRelease"}};!function(){$(P.CRITIC_FILTER_LINK).on("click",function(){return $(".js-critics-filter-link.bold").removeClass("bold"),$(this).addClass("bold"),!1}),$(P.REVIEW_TEXT_AREA).on("click touch",K),$(P.RATING_STAR).on("click touch",K),$(P.SUBMIT_BUTTON).on("click touch",K),$(P.WANT_TO_SEE_BTN).on("click touch",K),$(P.RATING_MODAL_BTN).on("click touch",K),$(P.REVIEW_TEXT_AREA).on("keyup",function(){$(P.REVIEW_TEXT_AREA).not(this).val($(this).val())}),RottenTomatoes.context.badWordsList&&N();var c=RottenTomatoes.context.isPreRelease?ca.wts.PRE_RELEASE:ca.wts.POST_RELEASE;$(P.WANT_TO_SEE_RATINGS_GROUP).addClass(c),V=$(P.POST_REVIEW_FEEDBACK),RottenTomatoes.eventQ.register(RottenTomatoes.header.EVENT_NAMES.AUTH.LOGIN,J),RottenTomatoes.eventQ.register(RottenTomatoes.header.EVENT_NAMES.AUTH.LOGOUT,L),o(),$(P.RATING_STAR).on("mouseover",function(){var c=$(this);if(!c.hasClass(ca.star.MOBILE_STAR)){var d,e=c.parent(),f=c.data("side"),g=parseFloat(c.data("rating-value"));"left"===f?d=ca.star.HALF:"right"===f&&(d=ca.star.FILLED),b(g),a(e),e.addClass(d)}}),$(P.RATING_STAR).on("mouseleave",function(){if(RottenTomatoes.context.rateAndReviewFlag)d(X.initialScore);else{if($(this).hasClass(ca.star.MOBILE_STAR))return;d(ba.userRating&&ba.userRating.score?ba.userRating.score:0)}}),$(P.RATING_STAR).on("click touch",function(){var a=$(this);a.hasClass(ca.star.MOBILE_STAR)?RottenTomatoes.dtmData.customerId&&(RottenTomatoes.context.rateAndReviewFlag?(RottenTomatoes.rateAndReview.mobileInit(),$(P.MULTIPAGE_MODAL).removeClass(ca.RATE_AND_REVIEW_MODAL_HIDDEN)):z()):RottenTomatoes.dtmData.customerId&&RottenTomatoes.context.rateAndReviewFlag&&(RottenTomatoes.rateAndReview.desktopInit(a.data("rating-value")),$(P.MULTIPAGE_MODAL).removeClass(ca.RATE_AND_REVIEW_MODAL_HIDDEN))}),$(P.EDIT_REVIEW_BTN).on("click touch",function(){RottenTomatoes.dtmData.customerId&&RottenTomatoes.context.rateAndReviewFlag&&(RottenTomatoes.rateAndReview.mobileInit(),$(P.MULTIPAGE_MODAL).removeClass(ca.RATE_AND_REVIEW_MODAL_HIDDEN))}),$(P.TICKET_VENODR_DROPDOWN_OPTION).on("click touch",function(a){var b=$(P.TICKET_VENDOR_LEGAL_TEXT);if(void 0!==a.target.attributes.disabled)return void(b.hasClass(ca.HIDE)||b.addClass(ca.HIDE));b.removeClass(ca.HIDE)}),$(P.RATING_MODAL_CLOSE_BTN).on("click touch",function(){M(X)}),$(P.RATING_MODAL).on("click touch",function(a){a.target===a.currentTarget&&M(X)})}()}(),function(){function a(a){return a?", "+a+"!":""}function b(a){if(r){var b=s[a],c=$(q.SUBMIT_MSG_HEADER);$(q.SUBMIT_MSG_WRAP).removeClass("hide"),c.html(b.header.replace("{{name}}",p)),b.copy&&$(q.SUBMIT_MSG_COPY).html(b.copy),b.reviewInfo&&0===t.text().trim().length&&(t.removeClass("hide"),t.append(b.reviewInfo)),t.text().trim().length>0&&t.removeClass("hide"),$(q.REVIEW_INFO_CLOSE).on("click",function(){return t.addClass("hide"),!1})}else $(q.SUBMIT_MSG_WRAP).removeClass("hide"),$(q.SUBMIT_MSG_HEADER).html(s[a].header),$(q.SUBMIT_MSG_COPY).html(s[a].copy),a!==u.reviewNonVerified&&a!==u.reviewVerified&&a!==u.boughtSomewhereElse||$(q.SUBMIT_MSG_COPY_URL).attr("href",RottenTomatoes.link.editorialPageCodeOfConduct())}function c(a){a?a.partnerText===v.BOUGHT_SOMEWHERE_ELSE?b(u.boughtSomewhereElse):a.verifyPurchase||a.review?!a.verifyPurchase&&a.review?b(u.reviewNonVerified):a.verifyPurchase&&!a.review?b(u.ratingVerified):a.verifyPurchase&&a.review&&b(u.reviewVerified):b(u.ratingNonVerified):b(u.ratingNonVerified),$(q.SUBMIT_MSG_STAR).css("visibility","visible")}function d(b){var c=b.firstName||"",d=b.lastName&&b.lastName.slice(0,1)||"";p=r?c:a(c),$(q.USER_NAME).text(c+" "+d)}function e(a){a.preventDefault(),RottenTomatoes.tracking.satelliteTrack("verify purchase learn more clicks"),window.open($(this).attr("href"))}function f(){$(q.PRODUCT_BLOG_URL).one("click",e)}function g(){$(q.SUBMIT_BUTTON).css("opacity","0.5").text("Submitting..."),$(q.SUBMIT_BUTTON).attr("disabled","disabled")}function h(){$(q.SUBMIT_BUTTON).css("opacity","1").text("Submit"),$(q.SUBMIT_BUTTON).removeAttr("disabled")}function i(a){w.html(a).show().fadeOut(2500)}function j(a){var b=a&&a.partnerText&&a.partnerText===v.FANDANGO,c=a&&a.score;RottenTomatoes.dtmData.verifyPurchase="",RottenTomatoes.dtmData.reviewStars=c,b&&c&&(RottenTomatoes.dtmData.verifyPurchase="1",RottenTomatoes.dtmData.verifyPurchaseType="fandango"),RottenTomatoes.tracking.satelliteTrack("fan review complete")}function k(){g()}function l(a){$(q.RATING_MODAL).modal("hide"),j(a),c(a),h()}function m(){i("We couldn't save the rating."),h()}function n(a){a.preventDefault(),$(q.RATING_WIDGET_STAR_MEANINGS).html($(this).data("rating-value")+" stars: "+$(this).data("title"))}function o(){x||(RottenTomatoes.dtmData.fanReviewStartType=$(this).data("fanreviewstarttype"),RottenTomatoes.tracking.satelliteTrack("fan review start"),x=!0)}var p,q={DROPDOWN_TRIGGER:".js-rt-dropdown-trigger",MODAL_STAR_RATING:".js-modal-star-rating",PRODUCT_BLOG_URL:".js-product-blog-url",RATING_MODAL:"#rating_widget_modal",RATING_WIDGET_STAR_MEANINGS:".js-rating__widget-modal--star-meanings",SATELLITE:".js-satellite",SELECT_MENU:".js-user-verify-ticket__select-menu",SUBMIT_BUTTON:".js-rating_textbox-submit-btn",SUBMIT_MSG_WRAP:".js-review-submitted-message",SUBMIT_MSG_STAR:".js-review-submitted-message__star",SUBMIT_MSG_HEADER:".js-review-submitted-message__header-text",SUBMIT_MSG_COPY:".js-review-submitted-message__copy",SUBMIT_MSG_REVIEW_INFO:".js-review-submitted-message__review-info",TEXTBOX:".js-rating_textbox-textarea",USER_NAME:".js-user-rating-mobile__username",REVIEW_INFO_CLOSE:".js-review-submitted-message__close-review-info"},r=RottenTomatoes.context.rateAndReviewFlag,s=function(){if(r){var a=RottenTomatoes.context.ratingModuleConfirmationMessages.CODE_OF_CONDUCT_NOTICE;return{BOUGHT_SOMEWHERE_ELSE:{header:RottenTomatoes.context.ratingModuleConfirmationMessages.THANK_YOU,reviewInfo:a},RATING_NON_VERIFIED:{header:RottenTomatoes.context.ratingModuleConfirmationMessages.THANK_YOU},REVIEW_NON_VERIFIED:{header:RottenTomatoes.context.ratingModuleConfirmationMessages.THANK_YOU,reviewInfo:a},RATING_VERIFIED:{header:RottenTomatoes.context.ratingModuleConfirmationMessages.THANK_YOU,copy:RottenTomatoes.context.ratingModuleConfirmationMessages.RATING_VERIFICATION_NOTICE},REVIEW_VERIFIED:{header:RottenTomatoes.context.ratingModuleConfirmationMessages.THANK_YOU,copy:RottenTomatoes.context.ratingModuleConfirmationMessages.REVIEW_VERIFICATION_NOTICE,reviewInfo:a}}}return{BOUGHT_SOMEWHERE_ELSE:{header:"Thanks! Your review has been submitted.",copy:"We were not able to verify your rating and/or review at this time. We’re exploring more ways to verify ratings and reviews in future.<br/><br/>Reviews may take some time to be published and are subject to our <a>Community Code of Conduct</a>."},RATING_NON_VERIFIED:{header:"Thanks! Your rating has been submitted.",copy:"Reviews may take some time to be published and are subject to our <a>Community Code of Conduct</a>."},REVIEW_NON_VERIFIED:{header:"Thanks! Your review has been submitted!",copy:"Reviews may take some time to be published and are subject to our <a>Community Code of Conduct</a>."},RATING_VERIFIED:{header:"Thanks! Your rating has been submitted.",copy:"If your ticket purchase is confirmed a “Verified” tag will appear in the Rating History section of your user profile."},REVIEW_VERIFIED:{header:"Thanks! Your review has been submitted!",copy:"If your ticket purchase is confirmed a “Verified” tag will appear next to your review. Reviews may take some time to be published and are subject to our <a>Community Code of Conduct</a>."}}}(),t=$(q.SUBMIT_MSG_REVIEW_INFO),u={boughtSomewhereElse:"BOUGHT_SOMEWHERE_ELSE",ratingNonVerified:"RATING_NON_VERIFIED",ratingVerified:"RATING_VERIFIED",reviewNonVerified:"REVIEW_NON_VERIFIED",reviewVerified:"REVIEW_VERIFIED"},v={FANDANGO:"Fandango",BOUGHT_SOMEWHERE_ELSE:"Bought somewhere else"},w=null,x=!1;!function(){$(q.MODAL_STAR_RATING).on("click touch",n),$(q.SATELLITE).on("click",o),RottenTomatoes.eventQ.register(RottenTomatoes.tooltip.EVENT_NAMES.TOOLTIP.MOUSEENTER,f),RottenTomatoes.eventQ.register(RottenTomatoes.header.EVENT_NAMES.AUTH.LOGIN,d),RottenTomatoes.eventQ.register(RottenTomatoes.rating.EVENT_NAMES.RATING.SUBMIT_BUTTON_CLICKED,k),RottenTomatoes.eventQ.register(RottenTomatoes.rating.EVENT_NAMES.RATING.RATING_POSTED,l),RottenTomatoes.eventQ.register(RottenTomatoes.rating.EVENT_NAMES.RATING.FAIL_RATING_POST,m),w=$(q.POST_REVIEW_FEEDBACK)}()}(),function(a){function b(b){var e=b&&b.wantToSeeCount||0;!(!b||!b.ratingsStartDate)&&new Date(b.ratingsStartDate)>new Date&&e&&a(c.WTS_COUNT).each(function(){var b=a(this),c=e.toLocaleString("en");if(c.includes(",")){var f=c.match(d.wtsNumbers);c=f[0]+"."+f[1].substr(0,1)+(f.length<3?"K":"M")}c="("+c+")",b.text(c)})}var c={WTS_COUNT:".js-rating_wts-count"},d={wtsNumbers:/(\d{1,3})/g};!function(){b(RottenTomatoes.context.wantToSeeData)}()}(jQuery),function(){function a(a,c){f=$(a),g=c,b(0)}function b(a){var b=g[a];b&&b.htmlContainer&&b.actions&&(f.html($(b.htmlContainer).html()),b.actions())}function c(a){a.keyCode===j.ESC&&e()}function d(a){return $(h.MULTI_PAGE_MODAL).append($(a.htmlContainer).html()),$(h.SUB_MODAL).addClass(i.OPEN_SUB_MODAL),a.actions(),$(document).keydown(c),!1}function e(){$(h.MULTI_PAGE_MODAL+" "+h.SUB_MODAL).remove()}var f,g,h={SUB_MODAL:".js-multi-page-modal__sub-modal",MULTI_PAGE_MODAL:".js-multi-page-modal"},i={OPEN_SUB_MODAL:"multi-page-modal__sub-modal-overlay--open"},j={ESC:27};RottenTomatoes.multiPageModal={init:a,loadPage:b,triggerSubModal:d,closeSubModal:e}}(),function(){function a(){RottenTomatoes.cookie.getCookie(C.HIDE_INTERSTITIAL)?RottenTomatoes.multiPageModal.loadPage(B.VERIFICATION):(RottenTomatoes.multiPageModal.loadPage(B.INTERSTITIAL),rtLocals.rateAndReview.interstitial.startInterstitialSequence())}function b(){$(y.CLOSE_MODAL_BTN).on("click",function(){var a=$(this).data("step");if(a===A.RATE_AND_REVIEW)if("edit"===$(this).data("flow"))RottenTomatoes.multiPageModal.triggerSubModal({htmlContainer:"#discardReviewChangeAlert",actions:function(){j(),m()}});else{var b="0"!==D.pendingReview.score;b?RottenTomatoes.multiPageModal.triggerSubModal({htmlContainer:"#submitReviewAlert",actions:function(){i(),m()}}):rtLocals.rateAndReview.ui.closeRateAndReviewModal()}else a===A.VERIFICATION?RottenTomatoes.multiPageModal.triggerSubModal({htmlContainer:"#submitReviewAlert",actions:function(){i(),m()}}):(rtLocals.rateAndReview.interstitial.stopInterstitialSequence(),rtLocals.rateAndReview.ui.closeRateAndReviewModal())})}function c(){$(y.MOBILE_DRAWER_KEEP_WRITING_BTN).on("click",RottenTomatoes.mobileDrawer.closeDrawer)}function d(){$(y.BACK_MODAL_BTN).on("click",function(){RottenTomatoes.multiPageModal.loadPage(B.RATE_AND_REVIEW),RottenTomatoes.formUI.minimumCharacterCounter.init(D.pendingReview.review),RottenTomatoes.formUI.starsRating.init(D.pendingReview.score),$(y.VERIFIED_TICKET_EDIT_BUTTON).html(D.pendingReview.partner||"Select ticket provider")})}function e(){$(y.NEXT_BTN).on("click",function(){"0"!==D.pendingReview.score&&(RottenTomatoes.formUI.minimumCharacterCounter.hasMinimumCount?a():RottenTomatoes.mobileDrawer.openDrawer())})}function f(){$(y.CONTINUE_BTN).on("click",function(){rtLocals.rateAndReview.interstitial.stopInterstitialSequence(),RottenTomatoes.multiPageModal.loadPage(B.VERIFICATION)})}function g(){$(y.EDIT_REVIEW_SUBMIT_BTN).on("click",function(){RottenTomatoes.formUI.minimumCharacterCounter.hasMinimumCount?(t(),rtLocals.rateAndReview.ui.closeRateAndReviewModal()):RottenTomatoes.mobileDrawer.openDrawer()})}function h(){$(y.SUBMIT_ONLY_RATING_BTN).on("click",function(){RottenTomatoes.mobileDrawer.closeDrawer(),RottenTomatoes.formUI.minimumCharacterCounter.setTextValue(""),D.pendingReview.review="",t(),rtLocals.rateAndReview.ui.closeRateAndReviewModal()})}function i(){$(y.SUB_MODAL_REMOVE_REVIEW_BTN).on("click",function(){D=Object.assign(D||{pendingReview:{score:"0",review:"",partner:""}}),rtLocals.rateAndReview.ui.closeRateAndReviewModal(),rtLocals.rateAndReview.ui.returnRatingStarsToUnSelected()})}function j(){$(y.SUB_MODAL_DISCARD_CHANGE_BTN).on("click",function(){D=Object.assign(D||{pendingReview:{score:D.userReview.score,review:D.userReview.review,partner:""}}),rtLocals.rateAndReview.ui.closeRateAndReviewModal()})}function k(){$(y.SUB_MODAL_VERIFY_TICKET_BTN).on("click",function(){RottenTomatoes.multiPageModal.closeSubModal()})}function l(){$(y.VERIFIED_TICKET_VENDOR).on("click",u)}function m(){$(y.SUBMIT_RATING_AND_REVIEW_BTN).on("click",function(){var a=!1;document.querySelectorAll(y.VERIFIED_TICKET_VENDOR).forEach(function(b){b.classList.contains(z.VERIFIED_TICKET_VENDOR_SELECTED)&&(a=!0)}),a?(t(),rtLocals.rateAndReview.ui.closeRateAndReviewModal(),$(y.CLOSE_MODAL_BTN).data("step")!==A.RATE_AND_REVIEW&&RottenTomatoes.cookie.setCookie(C.HIDE_INTERSTITIAL,!0,365)):RottenTomatoes.multiPageModal.triggerSubModal({htmlContainer:"#verifyTicketAlert",actions:function(){k(),m()}})})}function n(){$(y.VERIFIED_TICKET_EDIT_BUTTON).on("click",function(){D.pendingReview.score=RottenTomatoes.formUI.starsRating.rating,D.pendingReview.review=RottenTomatoes.formUI.minimumCharacterCounter.textValue,a(),r()})}function o(a){D.userInfo?Object.assign(D.userInfo||{},a):D.userInfo=a;var b={mediaId:RottenTomatoes.context.ratingMediaInfo.mediaId,mediaType:RottenTomatoes.context.ratingMediaInfo.mediaType};rtLocals.rateAndReview.getReview(b).then(q).catch(s)}function p(){D.userInfo=null,D.userReview=null,D.pendingReview=null}function q(a){a&&(D.userReview=a)}function r(){if(D.userReview&&D.userReview.isVerified){var a=y.VERIFIED_TICKET_VENDOR+'[data-vendor="FANDANGO"]',b=document.querySelector(a);$(b).click()}}function s(a){}function t(){var a=RottenTomatoes.formUI.starsRating.rating||D.pendingReview.score,b=RottenTomatoes.formUI.minimumCharacterCounter.textValue||D.pendingReview.review,c=$(y.VERIFIED_TICKET_VENDOR).filter("."+z.VERIFIED_TICKET_VENDOR_SELECTED).data("vendor")||D.pendingReview.partner;D=Object.assign(D||{pendingReview:{score:a,review:b,partner:c}}),parseInt(D.pendingReview.score)===D.userReview.score&&D.pendingReview.review===D.userReview.review||rtLocals.rateAndReview.postReview(a,b,c,D.userInfo)}function u(){rtLocals.rateAndReview.ui.updateVerifiedTicketProvider(this),D.pendingReview.partner=$(this).data("vendor")}function v(){rtLocals.rateAndReview.ui.handleStarSelect(),D.pendingReview.score=RottenTomatoes.formUI.starsRating.rating}function w(){$(y.STAR_SELECTED).length?(RottenTomatoes.multiPageModal.init(y.MULTI_PAGE_MODAL,[{htmlContainer:"#edit-review-submission",actions:function(){b(),n(),g(),c(),h(),l(),m()}},{htmlContainer:"#interstitial",actions:function(){b(),f()}},{htmlContainer:"#edit-vas-submission",actions:function(){d(),b(),l(),m()}}]),$(y.STAR).on("click touchend",v),RottenTomatoes.formUI.minimumCharacterCounter.init(D.userReview.review),RottenTomatoes.formUI.starsRating.init(D.userReview.score)):(RottenTomatoes.multiPageModal.init(y.MULTI_PAGE_MODAL,[{htmlContainer:"#rate-and-review-submission",actions:function(){b(),e(),c(),h()}},{htmlContainer:"#interstitial",actions:function(){b(),f()}},{htmlContainer:"#vas-submission",actions:function(){b(),l(),m()}}]),RottenTomatoes.formUI.minimumCharacterCounter.init(),RottenTomatoes.formUI.starsRating.init("0")),RottenTomatoes.mobileDrawer.init(),$(y.STAR).on("click touchend",v)}function x(a){D.userReview.score>0?(RottenTomatoes.multiPageModal.init(y.MULTI_PAGE_MODAL,[{htmlContainer:"#edit-review-submission",actions:function(){b(),n(a),g(),c(),h(),l(),m()}},{htmlContainer:"#edit-vas-submission",actions:function(){d(),b(),l(),m()}}]),RottenTomatoes.formUI.minimumCharacterCounter.init(D.userReview.review),RottenTomatoes.formUI.starsRating.init(a),$(y.STAR).on("click touchend",v)):(RottenTomatoes.multiPageModal.init(y.MULTI_PAGE_MODAL,[{htmlContainer:"#rate-and-review-submission",actions:function(){b(),e(),c(),h()}},{htmlContainer:null},{htmlContainer:"#vas-submission",actions:function(){b(),l(),m()}}]),RottenTomatoes.formUI.minimumCharacterCounter.init(),RottenTomatoes.formUI.starsRating.init(a||0)),RottenTomatoes.mobileDrawer.init(),a>0&&v(),$(y.STAR).on("click touchend",v)}var y={BACK_MODAL_BTN:".js-back-multi-page-modal",CLOSE_MODAL_BTN:".js-close-multi-page-modal",EDIT_REVIEW_SUBMIT_BTN:"#editReviewSubmit",MOBILE_DRAWER:"#mobile-drawer",MOBILE_DRAWER_KEEP_WRITING_BTN:"#keepWritingBtn",SUBMIT_ONLY_RATING_BTN:"#submitOnlyRatingBtn",MULTI_PAGE_MODAL:".js-multi-page-modal",NEXT_BTN:".js-next-btn",CONTINUE_BTN:".js-continue-btn",REVIEW_TEXTAREA_INPUT:".js-textarea-input",REVIEW_TEXTAREA_COUNTER:".js-textarea-with-counter-item",STAR:".js-stars-rating-group .js-star-rating_draggable",STAR_SELECTED:".js-rating-star.score",STAR_DISPLAY:".js-star-display-desktop",SUB_MODAL_REMOVE_REVIEW_BTN:"#removeReview",SUB_MODAL_DISCARD_CHANGE_BTN:"#discardReview",SUB_MODAL_VERIFY_TICKET_BTN:"#verifyTicket",SUBMIT_RATING_AND_REVIEW_BTN:".js-submit-review",VERIFIED_TICKET_VENDOR:".js-verified-ticket-vendor",VERIFIED_TICKET_EDIT_BUTTON:".js-verified-ticket-edit"},z={VERIFIED_TICKET_VENDOR_SELECTED:"verify-ticket__theater--selected",STAR_DISPLAY_FILLED:"star-display__filled",STAR_DISPLAY_HALF:"star-display__half",STAR_DISPLAY_EMPTY:"star-display__empty",STAR_SCORE:"score"},A={RATE_AND_REVIEW:"review",INSTERSTITIAL:"interstitial",VERIFICATION:"verify"},B={RATE_AND_REVIEW:0,INTERSTITIAL:1,VERIFICATION:2},C={HIDE_INTERSTITIAL:"hide_interstitial"},D={pendingReview:{score:"0",review:"",partner:""},userReview:null,userInfo:null};RottenTomatoes.eventQ.register(RottenTomatoes.header.EVENT_NAMES.AUTH.LOGIN,o),RottenTomatoes.eventQ.register(RottenTomatoes.header.EVENT_NAMES.AUTH.LOGOUT,p),RottenTomatoes.eventQ.register(RottenTomatoes.rating.EVENT_NAMES.RATING.RATING_POSTED,q),RottenTomatoes.rateAndReview={mobileInit:w,desktopInit:x}}(),function(){function a(a,c,d){rtLocals.rateAndReview.verifyEmailStatus(function(){return b(a,c,d)})}function b(a,b,e){if(g&&g.hasProfanity(b))return window.alert("Your review does not meet our community guidelines. Please edit out any offensive language and try again.");var f={mediaId:i.mediaId,mediaType:i.mediaType,displayName:d(),facebookId:i.userInfo&&i.userInfo.fb_id,isSuperReviewer:i.userInfo&&i.userInfo.isSuperReviewer,score:a,reviewText:b,partnerId:h[e]};RottenTomatoes.rating.updateRating(f).then(function(a){j={initialScore:a.score||0,initialReview:a.review||""},rtLocals.rateAndReview.ui.updateUserRatingScore(a.score,j.initialScore),rtLocals.rateAndReview.ui.updateUserReview(a.review),rtLocals.rateAndReview.ui.refreshMobileWidget(a.score,j.initialScore),RottenTomatoes.eventQ.emit(RottenTomatoes.rating.EVENT_NAMES.RATING.RATING_POSTED,a)}).catch(c)}function c(){}function d(){return(i.userInfo.firstName||"")+" "+(i.userInfo.lastName&&i.userInfo.lastName.slice(0,1)||"")}function e(){var a;try{a=JSON.parse(window.atob(RottenTomatoes.context.badWordsList))}catch(a){}var b=RottenTomatoes.profanityFilter;b&&a&&(g=(new b).loadBadWords(a))}function f(b,c,d,f){i.userInfo=f,e(),a(b,c,d)}var g,h={Fandango:"FANDANGO"},i={mediaType:RottenTomatoes.context.ratingMediaInfo.mediaType,mediaId:RottenTomatoes.context.ratingMediaInfo.mediaId,userInfo:null,userRating:null},j=null;rtLocals.rateAndReview=Object.assign(rtLocals.rateAndReview||{},{postReview:f})}(),function(){function a(a){return new Promise(function(b,c){RottenTomatoes.rating.getRating(a).then(function(a){b(a)}).catch(function(a){c(a)})})}rtLocals.rateAndReview=Object.assign(rtLocals.rateAndReview||{},{getReview:a})}(),function(){function a(a){RottenTomatoes.auth.emailStatus().done(function(g){if(b(g.body.emailStatusId))return a();$(f.VERIFICATION_MODAL).modal({show:!0}),g.body.emailStatusId===j||g.body.emailStatusId===k||g.body.emailStatusId===l?c():(d(),$(f.RESEND_EMAIL_BTN).on("click",e))})}function b(a){return!!RottenTomatoes.cookie.getCookie("auth_user")&&(m.includes(a)||"FBK"===RottenTomatoes.cookie.getCookie("loginPlatform"))}function c(){$(f.RATING_MODAL_FOOTER).addClass(g.HIDE),$(f.MSG_CONTACT_US).removeClass(g.HIDE),$(f.MSG_VERIFY_USER).addClass(g.HIDE),$(f.RATING_MODAL_TITLE).html("Hi there")}function d(){$(f.MSG_VERIFY_USER).removeClass(g.HIDE),$(f.MSG_CONTACT_US).addClass(g.HIDE),$(f.RATING_MODAL_FOOTER).removeClass(g.HIDE),$(f.RATING_MODAL_TITLE).html("Real Quick")}function e(){var a=$(this);a.addClass(g.DISABLED).html("Sending..."),RottenTomatoes.auth.emailConfirmation().done(function(){a.html(h),setTimeout(function(){$(f.VERIFICATION_MODAL).modal(g.HIDE)},1e3)}).catch(function(){a.html(i)})}var f={VERIFICATION_MODAL:"#verify-email-reminder",MSG_CONTACT_US:".js-msg-contact-us",MSG_VERIFY_USER:".js-msg-verify-user",RATING_MODAL_FOOTER:".rating-modal-footer",RATING_MODAL_TITLE:".login-modal-title"},g={HIDE:"hide",DISABLED:"disabled"},h="SENT",i="Could not send",j=0,k=1,l=2,m=[4,5,6];rtLocals.rateAndReview=Object.assign(rtLocals.rateAndReview||{},{verifyEmailStatus:a})}(),function(){function a(){e=$(l.RATE_AND_REVIEW_MODAL),f=$(l.INTERSTITIAL_LIGHT_COLOR),g=$(l.INTERSTITIAL_MAIN_COLOR),h=$(l.INTERSTITIAL_IMAGE),i=$(l.INTERSTITIAL_EXPLANATION),j=$(l.INTERSTITIAL_CIRCLE_CHECK),k=$(l.INTERSTITIAL_CIRCLE_TWO)}function b(){e.removeClass(m.interstitial.red.BACKGROUND).removeClass(m.interstitial.green.BACKGROUND).removeClass(m.interstitial.blue.BACKGROUND),f.removeClass(m.interstitial.red.LIGHT_COLOR).removeClass(m.interstitial.green.LIGHT_COLOR).removeClass(m.interstitial.blue.LIGHT_COLOR),g.removeClass(m.interstitial.red.DARK_COLOR).removeClass(m.interstitial.green.DARK_COLOR).removeClass(m.interstitial.blue.DARK_COLOR),j.removeClass(m.interstitial.red.LIGHT_CIRCLE).removeClass(m.interstitial.green.LIGHT_CIRCLE).removeClass(m.interstitial.blue.LIGHT_CIRCLE),k.removeClass(m.interstitial.red.DARK_CIRCLE).removeClass(m.interstitial.green.DARK_CIRCLE).removeClass(m.interstitial.blue.DARK_CIRCLE)}function c(){o=!0,a();var c=RottenTomatoes.context.interstitialsConfig&&RottenTomatoes.context.interstitialsConfig.explanations||[],d=0;c.forEach(function(a){setTimeout(function(){if(o){b();var c=RottenTomatoes.sanitizer.text(a&&a.color);"red"!==c&&"green"!==c&&"blue"!==c&&(c="red"),e.addClass(m.interstitial[c].BACKGROUND),f.addClass(m.interstitial[c].LIGHT_COLOR),g.addClass(m.interstitial[c].DARK_COLOR),j.addClass(m.interstitial[c].LIGHT_CIRCLE),k.addClass(m.interstitial[c].DARK_CIRCLE),h.attr("src",RottenTomatoes.sanitizer.url(a&&a.imageSrc)),i.text(RottenTomatoes.sanitizer.text(a&&a.explanation))}},d),d+=n})}function d(){o=!1,b()}var e,f,g,h,i,j,k,l={RATE_AND_REVIEW_MODAL:".js-multi-page-modal",INTERSTITIAL_CIRCLE_CHECK:".js-interstitial__circle--check",INTERSTITIAL_CIRCLE_TWO:".js-interstitial__circle--two",INTERSTITIAL_MAIN_COLOR:".js-interstitial__main-color",
INTERSTITIAL_LIGHT_COLOR:".js-interstitial__light-color",INTERSTITIAL_IMAGE:".js-interstitial-image",INTERSTITIAL_EXPLANATION:".js-interstitial-explanation"},m={interstitial:{red:{BACKGROUND:"interstitial__background--red ",DARK_COLOR:"interstitial__color--dark-red",LIGHT_COLOR:"interstitial__color--light-red",DARK_CIRCLE:"interstitial__circle-color--dark-red",LIGHT_CIRCLE:"interstitial__circle-color--light-red"},green:{BACKGROUND:"interstitial__background--green",DARK_COLOR:"interstitial__color--dark-green",LIGHT_COLOR:"interstitial__color--light-green",DARK_CIRCLE:"interstitial__circle-color--dark-green",LIGHT_CIRCLE:"interstitial__circle-color--light-green"},blue:{BACKGROUND:"interstitial__background--blue",DARK_COLOR:"interstitial__color--dark-blue",LIGHT_COLOR:"interstitial__color--light-blue",DARK_CIRCLE:"interstitial__circle-color--dark-blue",LIGHT_CIRCLE:"interstitial__circle-color--light-blue"}}},n=4500,o=!1;rtLocals.rateAndReview=Object.assign(rtLocals.rateAndReview||{},{interstitial:{startInterstitialSequence:c,stopInterstitialSequence:d}})}(),function(){function a(a,b){var c=$(k.RATING_STARS);switch(a&&($(k.USER_RATING_WTS).addClass(l.HIDE),0!==b&&$(k.USER_EDIT_REVIEW_BTN).removeClass(l.HIDE)),a){case"+":break;case void 0:case null:c.find(k.RATING_STAR).removeClass("score");break;default:var d;d=Number.parseFloat?Number.parseFloat(a,10):Number(a),d&&(c.find(k.RATING_STAR).removeClass("score"),c.find('[data-rating-value="'+d+'"]').addClass("score"),e(a))}a&&($(k.RATING_STARS_MOBILE_WRAP).removeClass("text-center").addClass("review-present"),$(k.RATING_WIDGET_REVIEW_DESCRIPTION).addClass(l.HIDE),$(k.RATING_MODAL_OPEN_BTN).addClass(l.HIDE),c.removeClass(l.HIDE))}function b(a){var b=$(k.REVIEW_TEXT_AREA),c=a;c&&(b.val(h(c)),c.length>m&&(c=c.substr(0,m).trim()+"...")),$(k.USER_RATING_REVIEW_COMMENT).html(c)}function c(a){var b=$(k.VERIFIED_TICKET_VENDOR),c=$(a);b.each(function(){$(this).removeClass(l.VERIFIED_TICKET_VENDOR_SELECTED).children(k.VERIFIED_TICKET_DISCLAIMER).addClass(l.VERIFIED_TICKET_DISCLAIMER_HIDDEN)}),c.addClass(l.VERIFIED_TICKET_VENDOR_SELECTED).children(k.VERIFIED_TICKET_DISCLAIMER).removeClass(l.VERIFIED_TICKET_DISCLAIMER_HIDDEN),$(k.VERIFIED_TICKET_LEGAL).removeClass(l.VERIFIED_TICKET_LEGAL_HIDDEN)}function d(a,b){var c=$(k.WANT_TO_SEE_BTN),d=$(k.RATING_MODAL_MBL_BTN);a&&"-"!==a?(0!==b.initialScore&&(c.addClass(l.HIDE),d.addClass(l.HIDE)),RottenTomatoes.context&&RottenTomatoes.context.seasonId&&$(k.RATING_WIDGET).removeClass(l.HIDE)):(c.removeClass(l.HIDE),d.removeClass(l.HIDE),RottenTomatoes.context&&RottenTomatoes.context.seasonId&&$(k.RATING_WIDGET).addClass(l.HIDE))}function e(a){a=parseFloat(a),$(k.RATING_STAR).each(function(){var b=parseFloat($(this).data("rating-value")),c=$(this).parent();if(c.hasClass(l.starDisplays.DESKTOP)||c.hasClass(l.starDisplays.MOBILE)){var d;i(c),$('[data-rating-value="'+a+'"]').parent().addClass(Number.isInteger(a)?l.star.FILLED:l.star.HALF),c.hasClass(Object.values(l.star).join(" "))||(d=b<a?l.star.FILLED:l.star.EMPTY),c.addClass(d)}})}function f(){$(k.REVIEW_TEXTAREA_GROUP).removeClass(l.REVIEW_TEXTAREA_GROUP_HIDDEN),$(k.REVIEW_TEXTAREA_HEADER).addClass(l.REVIEW_TEXTAREA_HEADER_ACTIVE).removeClass(l.REVIEW_TEXTAREA_HEADER_HIDDEN),$(k.NEXT_BTN).removeAttr("disabled")}function g(){$(k.RATE_AND_REVIEW_MODAL).addClass(l.RATE_AND_REVIEW_MODAL_HIDDEN)}function h(a){if(!a)return null;var b=document.createElement("div");return b.innerHTML=a,0===b.childNodes.length?null:b.childNodes[0].nodeValue}function i(a){a.removeClass(Object.values(l.star).join(" "))}function j(){document.querySelectorAll(k.STAR_DISPLAY).forEach(function(a){a.classList.remove(l.STAR_DISPLAY_FILLED),a.classList.remove(l.STAR_DISPLAY_FILLED),a.classList.add(l.STAR_DISPLAY_EMPTY);for(var b=a.children,c=0;c<b.length;c+=1)b[c].classList.remove(l.STAR_SCORE)})}var k={NEXT_BTN:".js-next-btn",RATE_AND_REVIEW_MODAL:".js-multi-page-modal",RATING_MODAL_OPEN_BTN:".js-user-rating-mobile__review-modal-button",RATING_STARS:".js-rating-stars",RATING_STARS_MOBILE_WRAP:".js-user-rating-mobile__stars-wrap",RATING_STAR:".js-rating-star--modal",RATING_WIDGET:".rating_widget_mobile-star",RATING_WIDGET_REVIEW_DESCRIPTION:".js-user-rating-mobile__add-review-text",REVIEW_TEXTAREA_GROUP:".js-rate-and-review-textarea-group",REVIEW_TEXTAREA_HEADER:".js-rate-and-review-textarea-header",REVIEW_TEXT_AREA:".js-rating_textbox-textarea",USER_RATING_REVIEW_COMMENT:".js-user-rating-mobile__comment",USER_RATING_WTS:".user-rating-mobile__wts",USER_EDIT_REVIEW_BTN:".js-user-rating-mobile__edit",VERIFIED_TICKET_VENDOR:".js-verified-ticket-vendor",VERIFIED_TICKET_DISCLAIMER:".js-verified-ticket-disclaimer",VERIFIED_TICKET_LEGAL:".js-verify-ticket-legal",WANT_TO_SEE_BTN:".js-rating_wts-btn"},l={HIDE:"hide",RATE_AND_REVIEW_MODAL_HIDDEN:"rate-and-review--hidden",REVIEW_TEXTAREA_GROUP_HIDDEN:"rate-and-review__textarea-group--hidden",REVIEW_TEXTAREA_HEADER_HIDDEN:"rate-and-review__textarea-header--hidden",REVIEW_TEXTAREA_HEADER_ACTIVE:"rate-and-review__textarea-header--active",SUPER_REVIEWER_HIDDEN:"super-reviewer-badge--hidden",VERIFIED_TICKET_VENDOR_SELECTED:"verify-ticket__theater--selected",VERIFIED_TICKET_DISCLAIMER_HIDDEN:"verify-ticket__disclaimer--hidden",VERIFIED_TICKET_LEGAL_HIDDEN:"verify-ticket__legal--hidden",star:{FILLED:"star-display__filled",HALF:"star-display__half",EMPTY:"star-display__empty",MOBILE_STAR:"star-display__mobile-half"},starDisplays:{DESKTOP:"star-display__desktop",MOBILE:"star-display__mobile"},wts:{SELECTED:"button--wts-selected",PRE_RELEASE:"wts--preRelease",POST_RELEASE:"wts--postRelease"}},m=185;rtLocals.rateAndReview=Object.assign(rtLocals.rateAndReview||{},{ui:{closeRateAndReviewModal:g,handleStarSelect:f,updateUserRatingScore:a,updateUserReview:b,updateVerifiedTicketProvider:c,refreshMobileWidget:d,returnRatingStarsToUnSelected:j}})}(),function(){function a(a){var b=a.target;o(r.NOT_RATED),o(r.STARS_DRAGGED),document.querySelector(q.STARS_GROUP).dataset.originalRating=b.dataset.rating,h(b)}function b(b){b.keyCode===s.SPACE&&(b.preventDefault(),a(b))}function c(a){o(r.NOT_RATED),h(a.target)}function d(){if("0"===document.querySelector(q.STARS_GROUP).dataset.originalRating)m(r.STARS_CHECKED),i("0"),n(r.NOT_RATED);else{h(document.querySelector(q.STAR+'[data-rating="'+this.dataset.originalRating+'"]'))}}function e(a){var b=a.touches[0];a.preventDefault(),j(b.clientX,b.clientY)}function f(){var a=document.querySelector(q.STARS_GROUP),b=document.querySelector(q.STAR_MESSAGE);o(r.NOT_RATED),a.classList.add(r.STARS_UNTOUCHED),a.classList.remove(r.STARS_TOUCHED),b.classList.add(r.MESSAGE_UNTOUCHED),b.classList.remove(r.MESSAGE_TOUCHED),document.querySelectorAll(q.STAR_MESSAGE).forEach(function(a){a.classList.add(r.MESSAGE_UNTOUCHED),a.classList.remove(r.MESSAGE_TOUCHED)}),a.querySelectorAll(q.STAR).forEach(g),o(r.STARS_DRAGGED)}function g(a){a.style.transform="translate(0,0) scale(1)",a.style.transition="transform .2s"}function h(a){m(r.STARS_CHECKED);var b=a.dataset;i(b.rating),a.classList.add(r.STARS_CHECKED),RottenTomatoes.formUI.starsRating.rating=b.rating}function i(a){document.querySelectorAll(q.STAR_MESSAGE).forEach(function(b){b.classList.remove(r.MESSAGE_FOCUSED),b.classList.remove(r.MESSAGE_UNFOCUSED);var c=b.dataset.starUpperThreshold>=a&&b.dataset.starLowerThreshold<=a?r.MESSAGE_FOCUSED:r.MESSAGE_UNFOCUSED;b.classList.add(c)})}function j(a,b){var c=document.querySelector(q.STARS_GROUP),d=c.querySelectorAll(q.STAR);c.classList.remove(r.STARS_UNTOUCHED),c.classList.add(r.STARS_TOUCHED),n(r.STARS_DRAGGED),document.querySelectorAll(q.STAR_MESSAGE).forEach(function(a){a.classList.add(r.MESSAGE_TOUCHED),a.classList.remove(r.MESSAGE_UNTOUCHED)});var e,f=!1,g=-1/0;d.forEach(function(c,d){e=f?d-g==1?d%2==0?"-5px":"-10px":"-5px":"-10px",k(c,d,e),l(c,a,b)||(h(c),g=d,f=!0)})}function k(a,b,c){var d=b<=4?-1:1,e=d<0?b-4:b-5,f=(3.3*d+5.8*e).toString()+"px";a.style.transition="all .25s",a.style.transform="scale(1.6) translate("+f+", "+c+")"}function l(a,b,c){var d=a.getBoundingClientRect(),e=d.left,f=d.top,g=d.width,h=d.height;return b<=e||b>=e+g||c<=f||c>=f+h}function m(a){document.querySelectorAll(q.STAR).forEach(function(b){b.classList.remove(a)})}function n(a){document.getElementById(q.STARS_RATING_MODULE).classList.add(a)}function o(a){document.getElementById(q.STARS_RATING_MODULE).classList.remove(a)}function p(g){var h=document.querySelector(q.STARS_GROUP),j=h.querySelectorAll(q.STAR),k=window.matchMedia("only screen and (max-width: 760px)").matches;if(g+="",h.dataset.originalRating=g||"0",i(h.dataset.originalRating),j.forEach(function(g){k?(g.addEventListener("touchstart",a),g.addEventListener("touchend",f),g.addEventListener("touchmove",e)):(g.addEventListener("mouseover",c),h.addEventListener("mouseleave",d)),g.addEventListener("click",a),g.addEventListener("keydown",b)}),"0"!==g){var l=document.querySelector(q.STAR+'[data-rating="'+g+'"]');l&&l.click()}}var q={STARS_RATING_MODULE:"stars-rating-module",STAR_MESSAGE:".js-star-rating-message",STARS_GROUP:".js-stars-rating-group",STAR:".js-star-rating_draggable"},r={NOT_RATED:"stars-rating__container--isNotRated",STARS:"icon-star",STARS_TOUCHED:"stars-rating__stars-group--touched",STARS_UNTOUCHED:"stars-rating__stars-group--untouched",STARS_DRAGGED:"stars-rating__container--isDragging",STARS_CHECKED:"icon-star--checked",STARS_RETURNED:"icon-star--returned",MESSAGE_TOUCHED:"stars-rating__msg--touched",MESSAGE_UNTOUCHED:"stars-rating__msg--untouched",MESSAGE_FOCUSED:"stars-rating__msg--focused",MESSAGE_UNFOCUSED:"stars-rating__msg--unfocused"},s={SPACE:32};RottenTomatoes.formUI=Object.assign(RottenTomatoes.formUI||{},{starsRating:{rating:"0",init:p}})}(),function(){function a(a){return'<div class="textarea-with-counter"><svg height="20" width="20" class="js-textarea-with-counter-item textarea-with-counter__item textarea-with-counter__item--svg"><circle cx="8" cy="8" r="6" class="textarea-with-counter__circle textarea-with-counter__circle--base" /><circle cx="8" cy="8" r="6" class="js-textarea-with-counter-circle-overlay textarea-with-counter__circle textarea-with-counter__circle--overlay" /></svg><span class="js-textarea-with-counter-item textarea-with-counter__minimum-character-text textarea-with-counter__item">minimum characters</span>'+a.outerHTML+"</div>"}function b(){var a=$(this).val().trim(),b=a.length,c=b/i*100;h.css({"stroke-dashoffset":100-b}),c>=100?(g.fadeOut(),RottenTomatoes.formUI.minimumCharacterCounter.hasMinimumCount=!0):(g.fadeIn(),RottenTomatoes.formUI.minimumCharacterCounter.hasMinimumCount=!1),RottenTomatoes.formUI.minimumCharacterCounter.textValue=a}function c(){g=$(j.COUNTER_ITEM),h=$(j.CIRCLE_OVERLAY),k.on("keyup change",b),k.on("focus blur",function(){h.toggleClass("active")})}function d(a){var b=a||"";k.blur().html(b).val(b),RottenTomatoes.formUI.minimumCharacterCounter.textValue=b}function e(){k.trigger("change")}function f(b){k=$(j.COMMENT_BOX),k.each(function(){var b=$(this);b.before(a(this)),b.remove(),k=$(j.COMMENT_BOX),c()}),c(),d(b),e()}var g,h,i=40,j={COMMENT_BOX:".js-textarea-with-counter-text",COUNTER_ITEM:".js-textarea-with-counter-item",CIRCLE_OVERLAY:".js-textarea-with-counter-circle-overlay"},k=$(j.COMMENT_BOX);RottenTomatoes.formUI=Object.assign(RottenTomatoes.formUI||{},{minimumCharacterCounter:{init:f,textValue:null,updateCounter:e,setTextValue:d,hasMinimumCount:!1}})}(),function(){function a(){document.querySelector("body").classList.add(f.SCROLL_LOCK),document.getElementById(e.DRAWER).classList.add(f.DRAWER_OPEN)}function b(){document.querySelector("body").classList.remove(f.SCROLL_LOCK),document.getElementById(e.DRAWER).classList.remove(f.DRAWER_OPEN)}function c(a){var b=document.getElementById(e.DRAWER),c=b.classList.contains(f.DRAWER_OPEN);a.keyCode===g.ESC&&c&&b.classList.remove(f.DRAWER_OPEN)}function d(){document.addEventListener("keyup",c),document.querySelector(e.DRAWER_BACKDROP).addEventListener("click",b)}var e={DRAWER:"mobile-drawer",DRAWER_BACKDROP:".mobile-drawer__backdrop"},f={DRAWER_OPEN:"mobile-drawer--is-open",SCROLL_LOCK:"scroll-lock"},g={ESC:27};RottenTomatoes.mobileDrawer={init:d,closeDrawer:b,openDrawer:a}}(),function(){function a(){setTimeout(c,i)}function b(b,c){g.innerHTML=b,h.innerHTML=c,f.classList.remove(e.HIDE_ERROR_MESSAGE),a()}function c(){f.classList.add(e.HIDE_ERROR_MESSAGE),g.innerHTML="",h.innerHTML=""}var d={ERROR_TOASTER:".js-error-toaster",ERROR_TOASTER_HEADER:".js-error-toaster-header",ERROR_TOASTER_MESSAGE:".js-error-toaster-message",CLOSE_ERROR_TOASTER_BUTTON:".js-error-toaster-close-button"},e={HIDE_ERROR_MESSAGE:"error-toaster--hidden"},f=document.querySelector(d.ERROR_TOASTER),g=document.querySelector(d.ERROR_TOASTER_HEADER),h=document.querySelector(d.ERROR_TOASTER_MESSAGE),i=4500;document.querySelector(d.CLOSE_ERROR_TOASTER_BUTTON).addEventListener("click",c),RottenTomatoes.errorToaster={show:b,hide:c}}();